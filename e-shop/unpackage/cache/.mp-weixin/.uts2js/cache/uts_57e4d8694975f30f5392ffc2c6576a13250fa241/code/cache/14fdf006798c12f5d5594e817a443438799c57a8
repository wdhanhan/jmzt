{"code":"import { __awaiter, __read } from \"tslib\";\nimport { defineComponent } from \"vue\";\nexport default defineComponent({\n    data() {\n        return {\n            statusBarHeight: 0,\n            bannerCurrent: 0,\n            // ⭐ 轮播图从接口加载\n            bannerList: [],\n            // 首页商品列表\n            goodsList: [],\n        };\n    },\n    onLoad() {\n        this.statusBarHeight = uni.getWindowInfo().statusBarHeight;\n        // 加载轮播图 + 商品\n        this.loadBanners();\n        this.loadGoods();\n        uni.showShareMenu(new UTSJSONObject({\n            withShareTicket: true,\n            menus: ['shareAppMessage', 'shareTimeline'],\n            success: () => {\n                uni.__f__('log', 'at pages/home/home.uvue:114', '已打开分享菜单');\n            },\n            fail: (err = null) => {\n                uni.__f__('log', 'at pages/home/home.uvue:117', 'showShareMenu 失败：', err);\n            }\n        }));\n    },\n    methods: {\n        // 分享给好友\n        onShareAppMessage() {\n            return new UTSJSONObject({\n                title: '武汉东西湖青少年活动中心',\n                path: '/pages/home/home', // 打开的路径\n                // imageUrl 可选，不写就用默认截图\n                // imageUrl: 'https://xxx/your-share-img.png'\n            });\n        },\n        // 分享到朋友圈\n        onShareTimeline() {\n            return new UTSJSONObject({\n                title: '武汉东西湖青少年活动中心', // 朋友圈标题\n                // query 可选：'?from=timeline'\n                // imageUrl: 'https://xxx/your-share-img.png'\n            });\n        },\n        // 格式化价格\n        formatPrice(price = null, type = null) {\n            if (!price)\n                return type ? '' : '0';\n            let str = price.toString();\n            let _a = __read(str.split('.'), 2), i = _a[0], d = _a[1];\n            return type === 0 ? i : (d || '');\n        },\n        changeBanner(e = null) {\n            this.bannerCurrent = e.detail.current;\n        },\n        onSearch() {\n            uni.navigateTo({ url: '/pages/search/search' });\n        },\n        // 点击 Banner -> 跳商品详情（用 product_id）\n        onBannerClick(item = null) {\n            if (!item.product_id)\n                return null;\n            uni.navigateTo({\n                url: `/pages/GoodsDetail/GoodsDetail?goodsId=${item.product_id}`,\n            });\n        },\n        onGoodsItem(item = null) {\n            uni.navigateTo({\n                url: `/pages/GoodsDetail/GoodsDetail?goodsId=${item.id}`,\n            });\n        },\n        // ⭐ 加载轮播图（后端 carousel 表）\n        loadBanners() {\n            return __awaiter(this, void 0, void 0, function* () {\n                try {\n                    const res = yield uni.request({\n                        url: 'https://wdxwhdglzx.jzzw-tech.cn/api/carousel/list',\n                        method: 'GET',\n                    });\n                    const body = res.data || {};\n                    if (body.code === 200 && Array.isArray(body.data)) {\n                        // 后端返回：[{ id, image_url, product_id }]\n                        this.bannerList = body.data.map((b = null) => { return (new UTSJSONObject({\n                            id: b.id,\n                            pic: b.image_url,\n                            product_id: b.product_id,\n                        })); });\n                    }\n                    else {\n                        uni.__f__('error', 'at pages/home/home.uvue:190', '加载轮播图失败:', body);\n                    }\n                }\n                catch (e) {\n                    uni.__f__('error', 'at pages/home/home.uvue:193', '加载轮播图异常:', e);\n                }\n            });\n        },\n        // ⭐ 加载首页商品\n        loadGoods() {\n            return __awaiter(this, void 0, void 0, function* () {\n                try {\n                    const res = yield uni.request({\n                        url: 'https://wdxwhdglzx.jzzw-tech.cn/api/products/home',\n                        method: 'GET',\n                    });\n                    const body = res.data || {};\n                    const list = (body.data && body.data.list) || [];\n                    this.goodsList = list.map((g = null) => { return (new UTSJSONObject({\n                        id: g.id,\n                        name: g.name,\n                        // 兼容后端字段：min_price / price\n                        price: g.min_price || g.price || 0,\n                        pic: g.pic || '',\n                    })); });\n                }\n                catch (e) {\n                    uni.__f__('error', 'at pages/home/home.uvue:216', '加载商品失败', e);\n                }\n            });\n        },\n    },\n});\n//# sourceMappingURL=C:/Users/%E8%8B%A5%E6%B6%B5/Desktop/%E6%8E%A5%E5%8D%95/e-shop/pages/home/home.uvue?vue&type=script&lang.uts.js.map","references":[],"uniExtApis":["uni.getWindowInfo","uni.__f__","uni.showShareMenu","uni.navigateTo","uni.request"],"map":"{\"version\":3,\"file\":\"home.uvue?vue&type=script&lang.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"home.uvue?vue&type=script&lang.uts\"],\"names\":[],\"mappings\":\"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\"}"}
