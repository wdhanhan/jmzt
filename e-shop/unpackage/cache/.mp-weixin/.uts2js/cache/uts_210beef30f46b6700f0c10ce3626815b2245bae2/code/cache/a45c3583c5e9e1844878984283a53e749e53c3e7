{"code":"import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, toDisplayString as _toDisplayString, t as _t, o as _o, gei as _gei, sei as _sei, e as _e } from \"vue\";\nexport default /*#__PURE__*/ _defineComponent({\n    __name: 'a',\n    setup(__props) {\n        // 定义奖品列表 (假设顺时针排列，每个45度)\n        // 索引对应角度：0: 0-60度, 1: 60-120度... 这里简单按6等分计算\n        const prizes = [\"5积分\", \"10元礼品卡\", \"5积分\", \"20积分\", \"5积分\", \"谢谢参与\"];\n        // 状态变量\n        const rotateDegree = ref(0); // 当前旋转角度\n        const transitionConfig = ref(''); // 动画配置字符串\n        const isSpinning = ref(false); // 是否正在旋转\n        const remainingChances = ref(3); // 剩余次数\n        // 弹窗相关\n        const showModal = ref(false); // 遮罩层显示\n        const showModalAnimate = ref(false); // 触发内容动画\n        const prizeName = ref(\"\");\n        // 开始抽奖\n        const startLottery = () => {\n            if (isSpinning.value)\n                return null;\n            if (remainingChances.value <= 0) {\n                uni.showToast({ title: \"没有机会啦\", icon: \"none\" });\n                return null;\n            }\n            isSpinning.value = true;\n            remainingChances.value--;\n            // 1. 模拟随机中奖索引 (0-5)\n            const prizeIndex = Math.floor(Math.random() * 6);\n            prizeName.value = prizes[prizeIndex];\n            // 2. 计算旋转角度\n            // 基础旋转圈数 (例如转 6 圈，360 * 6)\n            const baseRounds = 360 * 6;\n            // 每个奖项 60度 (360 / 6 = 60)\n            // 加上随机偏移量让指针停在扇区中间 (+30)\n            // 注意：旋转方向通常是顺时针，所以角度是负数或者累加正数\n            // 这里我们用累加正数。需要计算目标角度。\n            // 假设 index 0 在 0度位置，index 1 在 60度...\n            // 为了停在 index 处，我们需要转过 (360 - index * 60) 度 (视具体的转盘图片起始角度而定)\n            // 这里简单模拟：目标角度 = 索引 * 60\n            const targetAngle = prizeIndex * 60;\n            // 累加之前的角度，防止倒转\n            // 新的角度 = 当前角度 + 基础圈数 + (目标位置 - 当前相对位置)\n            // 简单做法：直接狂加角度\n            const newDegree = rotateDegree.value + baseRounds + (360 - (rotateDegree.value % 360)) + (360 - targetAngle);\n            // 3. 启用 CSS 过渡动画 (先慢后快再慢: cubic-bezier)\n            transitionConfig.value = \"transform 4s cubic-bezier(0.25, 0.1, 0.25, 1)\";\n            // 4. 执行旋转 (Vue 会自动更新 DOM style)\n            // 强制一点延时确保 transition 生效\n            setTimeout(() => {\n                rotateDegree.value = newDegree;\n            }, 20);\n            // 5. 监听动画结束 (4秒后)\n            setTimeout(() => {\n                isSpinning.value = false;\n                // 重置 transition 以便下次可以瞬间重置角度(如果需要)或者保持现状\n                // 这里我们保持现状，下次继续累加\n                // 弹出结果\n                openModal();\n            }, 4000); // 必须匹配 transition-duration\n        };\n        const openModal = () => {\n            showModal.value = true;\n            // 延时一小会儿给个进场动画类\n            setTimeout(() => {\n                showModalAnimate.value = true;\n            }, 50);\n        };\n        const closeModal = () => {\n            showModalAnimate.value = false;\n            setTimeout(() => {\n                showModal.value = false;\n            }, 200);\n        };\n        return (_ctx, _cache) => {\n            \"raw js\";\n            const __returned__ = _e({\n                a: _t(_unref(remainingChances)),\n                b: 'rotate(' + _unref(rotateDegree) + 'deg)',\n                c: _unref(transitionConfig),\n                d: _o(startLottery),\n                e: _unref(showModal)\n            }, _unref(showModal) ? {\n                f: _t(_unref(prizeName)),\n                g: _o(closeModal),\n                h: _o(closeModal),\n                i: _unref(showModalAnimate) ? 1 : ''\n            } : {}, {\n                j: _sei(_gei(_ctx, ''), 'view')\n            });\n            return __returned__;\n        };\n    }\n});\n//# sourceMappingURL=C:/Users/zrh/Desktop/7600/e-shop/pages/a/a.uvue?vue&type=script&setup=true&lang.uts.js.map","references":["C:/Users/zrh/Desktop/HBuilderX/plugins/uniapp-cli-vite/node_modules/@vue/runtime-core/dist/runtime-core.d.ts","C:/Users/zrh/Desktop/HBuilderX/plugins/uniapp-cli-vite/node_modules/@vue/runtime-core/dist/runtime-core.d.ts"],"uniExtApis":["uni.showToast"],"map":"{\"version\":3,\"file\":\"a.uvue?vue&type=script&setup=true&lang.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"a.uvue?vue&type=script&setup=true&lang.uts\"],\"names\":[],\"mappings\":\"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\"}"}
