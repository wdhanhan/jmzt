{"code":"import {} from \"vue\";\nlet firstBackTime = 0;\nexport default defineComponent({\n    onLaunch() {\n        uni.__f__('log', 'at App.uvue:6', 'App Launch');\n        this.wxLogin(); // å¯åŠ¨æ—¶è‡ªåŠ¨èŽ·å–ä¸€æ¬¡ openid\n    },\n    onShow() {\n        uni.__f__('log', 'at App.uvue:11', 'App Show');\n    },\n    onHide() {\n        uni.__f__('log', 'at App.uvue:15', 'App Hide');\n    },\n    // ðŸ‘‡ åªåœ¨ APP ç«¯æ‰æœ‰çš„ç”Ÿå‘½å‘¨æœŸï¼Œç”¨æ¡ä»¶ç¼–è¯‘åŒ…èµ·æ¥\n    methods: {\n        wxLogin() {\n            // å¦‚æžœå·²ç»æœ‰ openidï¼Œå¯ä»¥é€‰æ‹©ä¸é‡å¤è¯·æ±‚\n            const oldOpenid = uni.getStorageSync('openid');\n            if (oldOpenid && oldOpenid.length > 0) {\n                uni.__f__('log', 'at App.uvue:47', 'å·²æœ‰ openidï¼š', oldOpenid);\n                return null;\n            }\n            uni.login(new UTSJSONObject({\n                provider: 'weixin',\n                success: (loginRes) => {\n                    uni.__f__('log', 'at App.uvue:54', 'uni.login success:', loginRes);\n                    if (!loginRes.code) {\n                        uni.showToast({\n                            title: 'å¾®ä¿¡ç™»å½•å¤±è´¥ï¼šæ—  code',\n                            icon: 'none'\n                        });\n                        return null;\n                    }\n                    // æŠŠ code å‘ç»™ä½ åŽç«¯\n                    uni.request({\n                        url: 'https://jmzt.cxxyonline.cn/api/wechat/openid',\n                        method: 'POST',\n                        header: new UTSJSONObject({\n                            'content-type': 'application/json'\n                        }),\n                        data: new UTSJSONObject({\n                            code: loginRes.code\n                        }),\n                        success: (res) => {\n                            uni.__f__('log', 'at App.uvue:75', 'openid æŽ¥å£è¿”å›ž:', res);\n                            // è¿™é‡Œçš„ç»“æž„å¯¹ä¸Šä½ åŽç«¯çš„è¿”å›žï¼š\n                            // { code: 200, data: { openid, session_key, unionid } }\n                            const body = res.data;\n                            if (body['code'] == 200) {\n                                const data = body['data'];\n                                const openid = data['openid'];\n                                uni.__f__('log', 'at App.uvue:85', 'æ‹¿åˆ° openid:', openid);\n                                // å­˜æœ¬åœ°ï¼ŒåŽé¢ä¸‹å•ã€ä¸ªäººä¸­å¿ƒç­‰éƒ½å¯ä»¥ç›´æŽ¥ç”¨\n                                uni.setStorageSync('openid', openid);\n                                uni.showToast({\n                                    title: 'ç™»å½•æˆåŠŸ',\n                                    icon: 'success'\n                                });\n                            }\n                            else {\n                                uni.showToast({\n                                    title: 'èŽ·å– openid å¤±è´¥:' + body['message'],\n                                    icon: 'none'\n                                });\n                            }\n                        },\n                        fail: (err) => {\n                            uni.__f__('log', 'at App.uvue:102', 'è¯·æ±‚ openid æŽ¥å£å¤±è´¥:', err);\n                            uni.showToast({\n                                title: 'æœåŠ¡å™¨é”™è¯¯',\n                                icon: 'none'\n                            });\n                        }\n                    });\n                },\n                fail: (err) => {\n                    uni.__f__('log', 'at App.uvue:111', 'uni.login fail:', err);\n                    uni.showToast({\n                        title: 'å¾®ä¿¡ç™»å½•å¤±è´¥',\n                        icon: 'none'\n                    });\n                }\n            }));\n        }\n    }\n});\n//# sourceMappingURL=C:/Users/zrh/Desktop/7600/e-shop/App.uvue?vue&type=script&lang.uts.js.map","references":[],"uniExtApis":["uni.__f__","uni.getStorageSync","uni.showToast","uni.setStorageSync","uni.request","uni.login"],"map":"{\"version\":3,\"file\":\"App.uvue?vue&type=script&lang.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"App.uvue?vue&type=script&lang.uts\"],\"names\":[],\"mappings\":\"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\"}"}
