"use strict";const e=require("../../common/vendor.js"),t=require("../../mock/bannerData.js"),r=require("../../common/assets.js"),a=e.defineComponent({data:()=>({statusBarHeight:0,bannerCurrent:0,bannerList:t.BannerData,goodsList:[]}),onLoad(){this.statusBarHeight=e.index.getWindowInfo().statusBarHeight,this.loadGoods()},methods:{formatPrice(t=null,r=null){if(!t)return r?"":"0";let a=t.toString(),n=e.__read(a.split("."),2),i=n[0],o=n[1];return 0===r?i:o||""},changeBanner(e=null){this.bannerCurrent=e.detail.current},onSearch(){e.index.navigateTo({url:"/pages/search/search"})},onGoodsItem(t=null){e.index.navigateTo({url:`/pages/GoodsDetail/GoodsDetail?goodsId=${t.id}`})},loadGoods(){return e.__awaiter(this,void 0,void 0,(function*(){try{let t=(yield e.index.request({url:"http://211.159.180.202:8088/api/products/home",method:"GET"})).data.data.list||[];this.goodsList=t.map(((e=null)=>new UTSJSONObject({id:e.id,name:e.name,price:e.min_price||e.price||0,pic:e.pic||""})))}catch(t){console.error("加载商品失败",t)}}))}}});const n=e._export_sfc(a,[["render",function(t,a,n,i,o,s){return{a:e.o(((...e)=>s.onSearch&&s.onSearch(...e))),b:r._imports_0,c:o.statusBarHeight+50+"px",d:o.statusBarHeight+"px",e:e.f(o.bannerList,((e,t,r)=>({a:e.pic,b:t}))),f:e.o(((...e)=>s.changeBanner&&s.changeBanner(...e))),g:e.f(o.bannerList,((t,r,a)=>({a:e.t(t),b:r,c:o.bannerCurrent===r?1:""}))),h:o.statusBarHeight+60+"px",i:e.f(o.goodsList,((t,r,a)=>e.e({a:t.pic,b:e.t(t.name),c:e.t(s.formatPrice(t.price,0)),d:s.formatPrice(t.price,1)},s.formatPrice(t.price,1)?{e:e.t(s.formatPrice(t.price,1))}:{},{f:r,g:e.o((e=>s.onGoodsItem(t)),r)})))}}]]);wx.createPage(n);
