"use strict";const o=require("../../common/vendor.js"),t=require("../../common/assets.js"),e=o.defineComponent({components:{AttrPopup:()=>"./components/AttrPopup/AttrPopup.js"},data:()=>({statusBarHeight:0,screenWidth:0,bannerCurrent:0,scrollTop:0,pageScrollTop:0,headCut:0,goodsId:0,info:new UTSJSONObject({images:[],skus:[]})}),computed:{displayPrice(){return this.info.skus&&this.info.skus.length>0?this.info.skus[0].price:this.info.price||0}},onLoad(t){const e=o.index.getWindowInfo();this.statusBarHeight=e.statusBarHeight,this.screenWidth=e.screenWidth,this.goodsId=Number(t.goodsId||0),this.getData()},methods:{onBack(){o.index.navigateBack()},getData(){o.index.request({url:`http://211.159.180.202:8088/api/products/${this.goodsId}`,method:"GET",success:o=>{const t=o.data.data||{};this.info=Object.assign(Object.assign({},t),{images:t.images||[]})}})},onPageScroll(o=null){const t=o.detail.scrollTop;this.pageScrollTop=Math.min(t/100,1),t<=50&&(this.headCut=0)},onScrollView(o=null){this.headCut=o,0===o&&(this.scrollTop=0)},changeBanner(o=null){this.bannerCurrent=o.detail.current},openPopup(o=null){this.$refs.AttrPopup&&this.$refs.AttrPopup.$callMethod?this.$refs.AttrPopup.$callMethod("open",o):console.warn("AttrPopup 实例上没有 $callMethod，检查 AttrPopup 是否为 uvue / uts 组件")},onToShop(){o.index.showToast({title:"暂未实现",icon:"none"})}}});if(!Array){o.resolveComponent("attr-popup")()}const s=o._export_sfc(e,[["render",function(e,s,n,r,i,a){return{a:t._imports_0$4,b:o.o(((...o)=>a.onBack&&a.onBack(...o))),c:0===i.headCut?1:"",d:o.o((o=>a.onScrollView(0))),e:1===i.headCut?1:"",f:o.o((o=>a.onScrollView(1))),g:2===i.headCut?1:"",h:o.o((o=>a.onScrollView(2))),i:3===i.headCut?1:"",j:o.o((o=>a.onScrollView(3))),k:t._imports_1$4,l:t._imports_1$5,m:i.statusBarHeight+50+"px",n:i.statusBarHeight+"px",o:i.pageScrollTop,p:t._imports_0$5,q:i.pageScrollTop<=0,r:o.o(((...o)=>a.onBack&&a.onBack(...o))),s:t._imports_4$2,t:t._imports_2$3,v:i.pageScrollTop<=0,w:i.statusBarHeight+50+"px",x:i.statusBarHeight+"px",y:o.f(i.info.images,((o,t,e)=>({a:o,b:t}))),z:o.o(((...o)=>a.changeBanner&&a.changeBanner(...o))),A:o.f(i.info.images,((o,t,e)=>({a:t,b:i.bannerCurrent===t?1:""}))),B:i.screenWidth+"px",C:o.t(a.displayPrice),D:o.t(i.info.name),E:t._imports_6$1,F:t._imports_6$1,G:o.f(i.info.images,((o,t,e)=>({a:t,b:o}))),H:o.sei("r0-1acfae86","view","goodsDetail"),I:t._imports_7$1,J:o.o(((...o)=>a.onToShop&&a.onToShop(...o))),K:t._imports_8$1,L:t._imports_9$1,M:o.o((o=>a.openPopup("cart"))),N:o.o((o=>a.openPopup("buy"))),O:o.sr("AttrPopup","1acfae86-0"),P:o.p({info:i.info}),Q:o.sei(o.gei(e,""),"scroll-view"),R:o.o(((...o)=>a.onPageScroll&&a.onPageScroll(...o))),S:i.scrollTop}}]]);e.__runtimeHooks=1,wx.createPage(s);
