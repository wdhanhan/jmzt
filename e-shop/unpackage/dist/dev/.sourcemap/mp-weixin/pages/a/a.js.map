{"version":3,"file":"a.js","sources":["pages/a/a.uvue","../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvYS9hLnV2dWU"],"sourcesContent":["<template>\n  <view class=\"page-container\">\n    <view class=\"bg-image-placeholder\"></view>\n\n    <view class=\"nav-bar\">\n      <view class=\"back-btn\"><text class=\"back-icon\">‚Äπ</text></view>\n      <text class=\"nav-title\">ÁßØÂàÜÊäΩÂ•ñ</text>\n      <view class=\"capsule-placeholder\"></view>\n    </view>\n\n    <view class=\"title-section\">\n      <text class=\"main-title\">ÁßØÂàÜÊäΩÂ•ñ</text>\n      <text class=\"sub-title\">10ÁßØÂàÜÊäΩÂ•ñ, Ââ©‰Ωô {{ remainingChances }} Ê¨°</text>\n    </view>\n\n    <view class=\"wheel-container\">\n      <view \n        class=\"wheel-rotate-bg\" \n        :style=\"{ \n          transform: 'rotate(' + rotateDegree + 'deg)',\n          transition: transitionConfig \n        }\"\n      >\n        <view class=\"wheel-content\">\n          <text class=\"wheel-text-0\">5ÁßØÂàÜ</text>\n          <text class=\"wheel-text-1\">10ÂÖÉÂç°</text>\n          <text class=\"wheel-text-2\">5ÁßØÂàÜ</text>\n          <text class=\"wheel-text-3\">20ÁßØÂàÜ</text>\n          <text class=\"wheel-text-4\">5ÁßØÂàÜ</text>\n          <text class=\"wheel-text-5\">Ë∞¢Ë∞¢ÂèÇ‰∏é</text>\n        </view>\n      </view>\n\n      <view class=\"wheel-pointer\"></view>\n\n      <view class=\"center-btn\" @click=\"startLottery\">\n        <text class=\"draw-text\">Á´ãÂç≥</text>\n        <text class=\"draw-text\">ÊäΩÂ•ñ</text>\n      </view>\n    </view>\n\n    <view class=\"bottom-section\">\n      <view class=\"tab-header\">\n        <view class=\"tab-item active-tab\"><text class=\"tab-text active-tab-text\">‰ªªÂä°</text></view>\n        <view class=\"tab-item\"><text class=\"tab-text inactive-tab-text\">ÊàëÁöÑ</text></view>\n      </view>\n      <view class=\"tab-content\">\n        <text style=\"color:#999; font-size:12px; align-self:center;\">ÂÆåÊàê‰ªªÂä°Ëé∑ÂèñÊõ¥Â§öÁßØÂàÜ...</text>\n      </view>\n    </view>\n\n    <view v-if=\"showModal\" class=\"modal-mask\">\n      <view class=\"modal-content\" :class=\"{ 'modal-animate': showModalAnimate }\">\n        <view class=\"modal-light-bg\"></view>\n        \n        <text class=\"modal-title\">ÊÅ≠ÂñúËé∑Âæó</text>\n        \n        <view class=\"prize-box\">\n          <text class=\"prize-icon\">üéÅ</text>\n        </view>\n        \n        <text class=\"prize-name\">{{ prizeName }}</text>\n        \n        <view class=\"modal-btn\" @click=\"closeModal\">\n          <text class=\"modal-btn-text\">ÂºÄÂøÉÊî∂‰∏ã</text>\n        </view>\n        \n        <view class=\"close-icon-area\" @click=\"closeModal\">\n          <text class=\"close-x\">‚úï</text>\n        </view>\n      </view>\n    </view>\n\n  </view>\n</template>\n\n<script setup lang=\"uts\">\n  // ÂÆö‰πâÂ•ñÂìÅÂàóË°® (ÂÅáËÆæÈ°∫Êó∂ÈíàÊéíÂàóÔºåÊØè‰∏™45Â∫¶)\n  // Á¥¢ÂºïÂØπÂ∫îËßíÂ∫¶Ôºö0: 0-60Â∫¶, 1: 60-120Â∫¶... ËøôÈáåÁÆÄÂçïÊåâ6Á≠âÂàÜËÆ°ÁÆó\n  const prizes = [\"5ÁßØÂàÜ\", \"10ÂÖÉÁ§ºÂìÅÂç°\", \"5ÁßØÂàÜ\", \"20ÁßØÂàÜ\", \"5ÁßØÂàÜ\", \"Ë∞¢Ë∞¢ÂèÇ‰∏é\"];\n  \n  // Áä∂ÊÄÅÂèòÈáè\n  const rotateDegree = ref(0); // ÂΩìÂâçÊóãËΩ¨ËßíÂ∫¶\n  const transitionConfig = ref(''); // Âä®ÁîªÈÖçÁΩÆÂ≠óÁ¨¶‰∏≤\n  const isSpinning = ref(false); // ÊòØÂê¶Ê≠£Âú®ÊóãËΩ¨\n  const remainingChances = ref(3); // Ââ©‰ΩôÊ¨°Êï∞\n  \n  // ÂºπÁ™óÁõ∏ÂÖ≥\n  const showModal = ref(false); // ÈÅÆÁΩ©Â±ÇÊòæÁ§∫\n  const showModalAnimate = ref(false); // Ëß¶ÂèëÂÜÖÂÆπÂä®Áîª\n  const prizeName = ref(\"\");\n\n  // ÂºÄÂßãÊäΩÂ•ñ\n  const startLottery = () => {\n    if (isSpinning.value) return;\n    if (remainingChances.value <= 0) {\n      uni.showToast({ title: \"Ê≤°ÊúâÊú∫‰ºöÂï¶\", icon: \"none\" });\n      return;\n    }\n\n    isSpinning.value = true;\n    remainingChances.value--;\n\n    // 1. Ê®°ÊãüÈöèÊú∫‰∏≠Â•ñÁ¥¢Âºï (0-5)\n    const prizeIndex = Math.floor(Math.random() * 6);\n    prizeName.value = prizes[prizeIndex];\n\n    // 2. ËÆ°ÁÆóÊóãËΩ¨ËßíÂ∫¶\n    // Âü∫Á°ÄÊóãËΩ¨ÂúàÊï∞ (‰æãÂ¶ÇËΩ¨ 6 ÂúàÔºå360 * 6)\n    const baseRounds = 360 * 6; \n    // ÊØè‰∏™Â•ñÈ°π 60Â∫¶ (360 / 6 = 60)\n    // Âä†‰∏äÈöèÊú∫ÂÅèÁßªÈáèËÆ©ÊåáÈíàÂÅúÂú®ÊâáÂå∫‰∏≠Èó¥ (+30)\n    // Ê≥®ÊÑèÔºöÊóãËΩ¨ÊñπÂêëÈÄöÂ∏∏ÊòØÈ°∫Êó∂ÈíàÔºåÊâÄ‰ª•ËßíÂ∫¶ÊòØË¥üÊï∞ÊàñËÄÖÁ¥ØÂä†Ê≠£Êï∞\n    // ËøôÈáåÊàë‰ª¨Áî®Á¥ØÂä†Ê≠£Êï∞„ÄÇÈúÄË¶ÅËÆ°ÁÆóÁõÆÊ†áËßíÂ∫¶„ÄÇ\n    // ÂÅáËÆæ index 0 Âú® 0Â∫¶‰ΩçÁΩÆÔºåindex 1 Âú® 60Â∫¶...\n    // ‰∏∫‰∫ÜÂÅúÂú® index Â§ÑÔºåÊàë‰ª¨ÈúÄË¶ÅËΩ¨Ëøá (360 - index * 60) Â∫¶ (ËßÜÂÖ∑‰ΩìÁöÑËΩ¨ÁõòÂõæÁâáËµ∑ÂßãËßíÂ∫¶ËÄåÂÆö)\n    // ËøôÈáåÁÆÄÂçïÊ®°ÊãüÔºöÁõÆÊ†áËßíÂ∫¶ = Á¥¢Âºï * 60\n    const targetAngle = prizeIndex * 60; \n    \n    // Á¥ØÂä†‰πãÂâçÁöÑËßíÂ∫¶ÔºåÈò≤Ê≠¢ÂÄíËΩ¨\n    // Êñ∞ÁöÑËßíÂ∫¶ = ÂΩìÂâçËßíÂ∫¶ + Âü∫Á°ÄÂúàÊï∞ + (ÁõÆÊ†á‰ΩçÁΩÆ - ÂΩìÂâçÁõ∏ÂØπ‰ΩçÁΩÆ)\n    // ÁÆÄÂçïÂÅöÊ≥ïÔºöÁõ¥Êé•ÁãÇÂä†ËßíÂ∫¶\n    const newDegree = rotateDegree.value + baseRounds + (360 - (rotateDegree.value % 360)) + (360 - targetAngle);\n\n    // 3. ÂêØÁî® CSS ËøáÊ∏°Âä®Áîª (ÂÖàÊÖ¢ÂêéÂø´ÂÜçÊÖ¢: cubic-bezier)\n    transitionConfig.value = \"transform 4s cubic-bezier(0.25, 0.1, 0.25, 1)\";\n    \n    // 4. ÊâßË°åÊóãËΩ¨ (Vue ‰ºöËá™Âä®Êõ¥Êñ∞ DOM style)\n    // Âº∫Âà∂‰∏ÄÁÇπÂª∂Êó∂Á°Æ‰øù transition ÁîüÊïà\n    setTimeout(() => {\n      rotateDegree.value = newDegree;\n    }, 20);\n\n    // 5. ÁõëÂê¨Âä®ÁîªÁªìÊùü (4ÁßíÂêé)\n    setTimeout(() => {\n      isSpinning.value = false;\n      // ÈáçÁΩÆ transition ‰ª•‰æø‰∏ãÊ¨°ÂèØ‰ª•Áû¨Èó¥ÈáçÁΩÆËßíÂ∫¶(Â¶ÇÊûúÈúÄË¶Å)ÊàñËÄÖ‰øùÊåÅÁé∞Áä∂\n      // ËøôÈáåÊàë‰ª¨‰øùÊåÅÁé∞Áä∂Ôºå‰∏ãÊ¨°ÁªßÁª≠Á¥ØÂä†\n      \n      // ÂºπÂá∫ÁªìÊûú\n      openModal();\n    }, 4000); // ÂøÖÈ°ªÂåπÈÖç transition-duration\n  };\n\n  const openModal = () => {\n    showModal.value = true;\n    // Âª∂Êó∂‰∏ÄÂ∞è‰ºöÂÑøÁªô‰∏™ËøõÂú∫Âä®ÁîªÁ±ª\n    setTimeout(() => {\n      showModalAnimate.value = true;\n    }, 50);\n  }\n\n  const closeModal = () => {\n    showModalAnimate.value = false;\n    setTimeout(() => {\n        showModal.value = false;\n    }, 200);\n  }\n</script>\n\n<style>\n  /* --- Âü∫Á°ÄÂÆπÂô® --- */\n  .page-container {\n    flex: 1;\n    background-color: #a8e6cf;\n    position: relative;\n  }\n  .bg-image-placeholder {\n    position: absolute;\n    top: 0; bottom: 0; left: 0; right: 0;\n    background-image: linear-gradient(to bottom, #d4f5e9, #82dcb8);\n  }\n\n  /* --- ÂØºËà™‰∏éÊ†áÈ¢ò --- */\n  .nav-bar {\n    height: 44px; margin-top: 44px;\n    flex-direction: row; justify-content: space-between; align-items: center; padding: 0 15px;\n  }\n  .back-btn {\n    width: 30px; height: 30px; border-radius: 15px;\n    background-color: rgba(255,255,255,0.5);\n    justify-content: center; align-items: center;\n  }\n  .back-icon { font-size: 20px; color: #006c5b; }\n  .nav-title { font-size: 18px; font-weight: bold; color: #005a4b; }\n  .capsule-placeholder { width: 80px; }\n\n  .title-section { align-items: center; margin: 20px 0; }\n  .main-title { font-size: 32px; font-weight: 900; color: #fff; text-shadow: 0 2px 5px rgba(0,108,91,0.3); }\n  .sub-title { font-size: 13px; color: #fff; background-color: rgba(0,108,91,0.2); padding: 4px 12px; border-radius: 12px; margin-top: 5px; }\n\n  /* --- ËΩ¨ÁõòÊ†∏ÂøÉÊ†∑Âºè --- */\n  .wheel-container {\n    width: 300px; height: 300px;\n    align-self: center;\n    position: relative;\n    justify-content: center; align-items: center;\n    margin-bottom: 20px;\n  }\n\n  .wheel-rotate-bg {\n    width: 280px; height: 280px;\n    border-radius: 140px;\n    background-color: #fff;\n    border-width: 8px; border-color: #6cdfbf;\n    /* ÂÜÖÈÉ®Â∏ÉÂ±Ä */\n    position: relative;\n    overflow: hidden;\n  }\n\n  /* Ê®°ÊãüÊâáÂå∫ÊñáÂ≠ó (ÁªùÂØπÂÆö‰Ωç) */\n  .wheel-content { width: 100%; height: 100%; position: relative; }\n  .wheel-text-0 { position: absolute; top: 20px; left: 120px; font-size: 12px; color: #E91E63; transform: rotate(0deg); }\n  .wheel-text-1 { position: absolute; top: 60px; right: 40px; font-size: 12px; color: #FF9800; transform: rotate(60deg); }\n  .wheel-text-2 { position: absolute; bottom: 60px; right: 40px; font-size: 12px; color: #E91E63; transform: rotate(120deg); }\n  .wheel-text-3 { position: absolute; bottom: 20px; left: 120px; font-size: 12px; color: #2196F3; transform: rotate(180deg); }\n  .wheel-text-4 { position: absolute; bottom: 60px; left: 40px; font-size: 12px; color: #E91E63; transform: rotate(240deg); }\n  .wheel-text-5 { position: absolute; top: 60px; left: 40px; font-size: 12px; color: #999; transform: rotate(300deg); }\n\n  .wheel-pointer {\n    position: absolute; top: -5px; z-index: 10;\n    width: 0; height: 0;\n    border-left: 10px solid transparent;\n    border-right: 10px solid transparent;\n    border-top: 30px solid #ff4d4f; /* Á∫¢Ëâ≤ÂÄí‰∏âËßíÊåáÈíà */\n  }\n\n  .center-btn {\n    position: absolute; z-index: 11;\n    width: 70px; height: 70px; border-radius: 35px;\n    background-image: linear-gradient(to bottom, #ff9c00, #ff5722);\n    border: 4px solid #fff;\n    box-shadow: 0 4px 10px rgba(0,0,0,0.2);\n    justify-content: center; align-items: center;\n  }\n  .draw-text { color: #fff; font-weight: bold; font-size: 16px; line-height: 18px; }\n\n  /* --- Â∫ïÈÉ®Âå∫Âüü --- */\n  .bottom-section {\n    flex: 1; background-color: #f5f5f5; border-top-left-radius: 20px; border-top-right-radius: 20px; overflow: hidden;\n  }\n  .tab-header { flex-direction: row; height: 50px; background-color: #006c5b; }\n  .tab-item { flex: 1; justify-content: center; align-items: center; }\n  .active-tab { background-color: #f5f5f5; border-top-left-radius: 20px; border-top-right-radius: 20px; }\n  .tab-text { font-size: 14px; font-weight: bold; }\n  .active-tab-text { color: #006c5b; }\n  .inactive-tab-text { color: #fff; opacity: 0.8; }\n  .tab-content { padding: 30px; }\n\n  /* --- ÂºπÁ™óÊ†∑Âºè (Modal) --- */\n  .modal-mask {\n    position: absolute; top: 0; bottom: 0; left: 0; right: 0;\n    background-color: rgba(0,0,0,0.6);\n    justify-content: center; align-items: center;\n    z-index: 999;\n  }\n\n  .modal-content {\n    width: 280px;\n    background-color: #fff;\n    border-radius: 16px;\n    padding: 20px;\n    align-items: center;\n    transform: scale(0.8);\n    opacity: 0;\n    transition-property: transform, opacity;\n    transition-duration: 0.3s;\n    transition-timing-function: cubic-bezier(0.175, 0.885, 0.32, 1.275); /* ÂºπÊÄßÊïàÊûú */\n  }\n  \n  /* ÂºπÁ™óÊøÄÊ¥ªÊó∂ÁöÑÊ†∑ÂºèÁ±ª */\n  .modal-animate {\n    transform: scale(1);\n    opacity: 1;\n  }\n\n  .modal-light-bg {\n    position: absolute; top: -50px; left: 0; right: 0; height: 150px;\n    background-image: linear-gradient(to bottom, rgba(255,215,0,0.3), rgba(255,255,255,0));\n    border-top-left-radius: 16px; border-top-right-radius: 16px;\n  }\n\n  .modal-title { font-size: 20px; font-weight: bold; color: #d93025; margin-bottom: 15px; z-index: 1; }\n  \n  .prize-box {\n    width: 100px; height: 100px; background-color: #fdf6e6; border-radius: 50%;\n    justify-content: center; align-items: center; margin-bottom: 15px;\n    border: 2px solid #f7d6a8;\n  }\n  .prize-icon { font-size: 50px; }\n  \n  .prize-name { font-size: 18px; color: #333; font-weight: bold; margin-bottom: 25px; }\n\n  .modal-btn {\n    width: 200px; height: 44px; background-color: #d93025; border-radius: 22px;\n    justify-content: center; align-items: center; margin-bottom: 15px;\n    box-shadow: 0 4px 8px rgba(217,48,37,0.3);\n  }\n  .modal-btn-text { color: #fff; font-size: 16px; font-weight: bold; }\n\n  .close-icon-area { padding: 10px; }\n  .close-x { font-size: 24px; color: #ccc; }\n\n</style>","import MiniProgramPage from 'C:/Users/zrh/Desktop/7600/e-shop/pages/a/a.uvue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uni","MiniProgramPage"],"mappings":";;;;;AA+EE,UAAM,SAAS,CAAC,OAAO,UAAU,OAAO,QAAQ,OAAO,MAAM;AAG7D,UAAM,eAAeA,kBAAI,CAAC;AAC1B,UAAM,mBAAmBA,kBAAI,EAAE;AAC/B,UAAM,aAAaA,kBAAI,KAAK;AAC5B,UAAM,mBAAmBA,kBAAI,CAAC;AAG9B,UAAM,YAAYA,kBAAI,KAAK;AAC3B,UAAM,mBAAmBA,kBAAI,KAAK;AAClC,UAAM,YAAYA,kBAAI,EAAE;AAGxB,UAAM,eAAe,MAAA;AACnB,UAAI,WAAW;AAAO,eAAO;AAC7B,UAAI,iBAAiB,SAAS,GAAG;AAC/BC,sBAAG,MAAC,UAAU,EAAE,OAAO,SAAS,MAAM,OAAM,CAAE;AAC9C,eAAO;AAAA,MACR;AAED,iBAAW,QAAQ;AACnB,uBAAiB;AAGjB,YAAM,aAAa,KAAK,MAAM,KAAK,OAAM,IAAK,CAAC;AAC/C,gBAAU,QAAQ,OAAO,UAAU;AAInC,YAAM,aAAa,MAAM;AAQzB,YAAM,cAAc,aAAa;AAKjC,YAAM,YAAY,aAAa,QAAQ,cAAc,MAAO,aAAa,QAAQ,QAAS,MAAM;AAGhG,uBAAiB,QAAQ;AAIzB,iBAAW,MAAA;AACT,qBAAa,QAAQ;AAAA,MACtB,GAAE,EAAE;AAGL,iBAAW,MAAA;AACT,mBAAW,QAAQ;AAKnB;MACD,GAAE,GAAI;AAAA,IACT;AAEA,UAAM,YAAY,MAAA;AAChB,gBAAU,QAAQ;AAElB,iBAAW,MAAA;AACT,yBAAiB,QAAQ;AAAA,MAC1B,GAAE,EAAE;AAAA,IACP;AAEA,UAAM,aAAa,MAAA;AACjB,uBAAiB,QAAQ;AACzB,iBAAW,MAAA;AACP,kBAAU,QAAQ;AAAA,MACrB,GAAE,GAAG;AAAA,IACR;;;;;;;;;;;;;;;;;;;;;AC5JF,GAAG,WAAWC,SAAe;"}