{"version":3,"file":"seckill.js","sources":["pages/seckill/seckill.uvue","../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvc2Vja2lsbC9zZWNraWxsLnV2dWU"],"sourcesContent":["<template>\n\n\n\n\n\n    <view class=\"head-info\">\n      <view class=\"head-back\" :style=\"{height: (statusBarHeight+50)+'px',paddingTop:statusBarHeight+'px',backgroundColor: 'rgba(231,45,30,'+pageScrollTop+')'}\">\n        <view class=\"back\" @click=\"onBack\">\n          <image src=\"/static/images/icon/back_icon2.png\" class=\"image\"></image>\n        </view>\n        <view class=\"title\">\n          <image src=\"/static/images/xsms_tit.png\" class=\"image\"></image>\n        </view>\n        <view class=\"more\">\n          <image src=\"/static/images/icon/more_icon2.png\" class=\"image\"></image>\n        </view>\n      </view>\n      <view class=\"head-banner\" :style=\"{marginTop: (statusBarHeight+60)+'px'}\">\n        <view class=\"banner\">\n          <swiper class=\"swiper\"\n                  :autoplay=\"false\"\n                  :circular=\"true\"\n                  :indicator-dots=\"true\"\n                  indicator-active-color=\"#ffffff\" indicator-color=\"rgba(255,255,255,0.5)\">\n            <swiper-item v-for=\"(item,index) in bannerList\" :key=\"index\">\n              <image :src=\"item.pic\" mode=\"aspectFit\" class=\"image\"></image>\n            </swiper-item>\n          </swiper>\n        </view>\n        <view class=\"brand-item\">\n          <view class=\"item\">\n            <view class=\"pic\">\n              <image src=\"https://m.360buyimg.com/mobilecms/s1265x1265_jfs/t1/211556/35/38471/42993/64f1aa51F7ee8e4e5/5f8c4f9c149335ad.jpg!q70.dpg.webp\" class=\"image\"></image>\n            </view>\n            <view class=\"title\">\n              <text class=\"text\">华为专区</text>\n            </view>\n          </view>\n          <view class=\"item\">\n            <view class=\"pic\">\n              <image src=\"https://m.360buyimg.com/mobilecms/s1265x1265_jfs/t1/110990/16/38425/36858/64b90d71Fcf3e8f7d/598d2cbbbcfa5db9.jpg!q70.dpg.webp\" class=\"image\"></image>\n            </view>\n            <view class=\"title\">\n              <text class=\"text\">荣耀专区</text>\n            </view>\n          </view>\n        </view>\n      </view>\n    </view>\n<!--    场次-->\n    <view class=\"session-info\">\n      <view class=\"session-item\">\n        <view class=\"item\" :class=\"{'active':sessionCut===0}\" @click=\"onSessionCut(0)\">\n          <view class=\"time\">\n            <text class=\"text\" :class=\"{'text-active':sessionCut===0}\">18:00</text>\n          </view>\n          <view class=\"title\">\n            <text class=\"text\" :class=\"{'text-active':sessionCut===0}\">已开抢</text>\n          </view>\n        </view>\n        <view class=\"item\" :class=\"{'active':sessionCut===1}\" @click=\"onSessionCut(1)\">\n          <view class=\"time\">\n            <text class=\"text\" :class=\"{'text-active':sessionCut===1}\">20:00</text>\n          </view>\n          <view class=\"title\">\n            <text class=\"text\" :class=\"{'text-active':sessionCut===1}\">抢购中</text>\n          </view>\n        </view>\n        <view class=\"item\" :class=\"{'active':sessionCut===2}\" @click=\"onSessionCut(2)\">\n          <view class=\"time\">\n            <text class=\"text\" :class=\"{'text-active':sessionCut===2}\">22:00</text>\n          </view>\n          <view class=\"title\">\n            <text class=\"text\" :class=\"{'text-active':sessionCut===2}\">即将开抢</text>\n          </view>\n        </view>\n        <view class=\"item\" :class=\"{'active':sessionCut===3}\" @click=\"onSessionCut(3)\">\n          <view class=\"time\">\n            <text class=\"text\" :class=\"{'text-active':sessionCut===3}\">00:00</text>\n          </view>\n          <view class=\"title\">\n            <text class=\"text\" :class=\"{'text-active':sessionCut===3}\">即将开抢</text>\n          </view>\n        </view>\n      </view>\n    </view>\n<!--    商品列表-->\n    <view class=\"seckill-goods\">\n      <view class=\"goods-item\">\n        <view class=\"item\" v-for=\"(item,index) in seckillList\"\n              @click=\"onGoodsItem(item)\"\n              :key=\"index\">\n            <view class=\"pic\">\n              <image :src=\"item.pic\" class=\"image\"></image>\n            </view>\n          <view class=\"info\">\n            <view class=\"goods-name\">\n              <text class=\"text\">{{item.name}}</text>\n            </view>\n            <view class=\"progress\">\n              <view class=\"bar\" :style=\"{width: calculateNumber(item.inventory as number,item.salesVolume as number,1)+'%'}\">\n                <text class=\"text\" v-if=\"calculateNumber(item.inventory as number,item.salesVolume as number,1) >= 40\">剩余{{calculateNumber(item.inventory as number,item.salesVolume as number,0)}}件商品</text>\n              </view>\n            </view>\n            <view class=\"price-btn\">\n              <view class=\"price-info\">\n                <view class=\"price\">\n                  <text class=\"min\">￥</text>\n                  <text class=\"max\">{{formatPrice(item.price as number,0)}}</text>\n                  <text class=\"min\" v-if=\"formatPrice(item.price as number,1)\">.{{formatPrice(item.price as number,1)}}</text>\n                </view>\n                <view class=\"old-price\">\n                  <text class=\"text\">￥{{item.originalPrice}}</text>\n                </view>\n              </view>\n              <view class=\"btn-info\">\n                <view class=\"btn\">\n                  <text class=\"text\">抢购</text>\n                </view>\n              </view>\n            </view>\n          </view>\n        </view>\n      </view>\n    </view>\n\n\n\n</template>\n\n<script lang=\"uts\">\n  import {seckillGoodsData,goodsItems} from '@/mock/goodsData.uts'\n  import {BannerData,bannerItem} from  '@/mock/bannerData.uts'\n\texport default {\n    data() {\n      return {\n        statusBarHeight: 0,\n        pageScrollTop: 0,\n        sessionCut: 0,\n        seckillList: seckillGoodsData as Array<goodsItems>,\n        bannerList: BannerData as Array<bannerItem>\n      };\n    },\n    onLoad(){\n      let windowInfo = uni.getWindowInfo();\n      this.statusBarHeight = windowInfo.statusBarHeight;\n    },\n    methods:{\n      /**\n       * 返回点击\n       */\n      onBack(){\n        uni.navigateBack();\n      },\n      /**\n       * 页面滑动事件\n       * @param e\n       */\n      onPageScroll(e: ScrollEvent){\n        let scrollTop:number = e.detail.scrollTop;\n        let top = scrollTop / 100;\n        this.pageScrollTop = top;\n        // 监听顶部滚动\n        if(top >= 1){\n          this.pageScrollTop = 1;\n        }\n      },\n      /**\n       * 数量计算\n       * @param count\n       * @param useCount\n       * @param type\n       */\n      calculateNumber(count: Number,useCount: Number,type: Number) :Number{\n        let sum = count - useCount;\n        let bar = (useCount / count) * 100;\n        return type === 0 ? sum : Math.round(bar*100)/100\n      },\n      formatPrice(price: Number,type: Number): string{\n        let strPrice = price.toString();\n        let start:string = strPrice.split('.')[0];\n        let end:string = '';\n        try {\n          end = strPrice.split('.')[1]\n        }catch (e){\n          end = '';\n        }\n\n        return type === 0 ? start : end\n      },\n      /**\n       * 商品点击\n       * @param item\n       */\n      onGoodsItem(item: goodsItems){\n        uni.navigateTo({\n          url: `/pages/GoodsDetail/GoodsDetail?goodsId=${item.id}`\n        })\n      },\n      /**\n       * 场次切换点击\n       * @param type\n       */\n      onSessionCut(type: Number){\n        this.sessionCut = type;\n      }\n    }\n\t}\n</script>\n\n<style lang=\"scss\">\n  @import \"seckill.scss\";\n</style>\n","import MiniProgramPage from 'C:/Users/zrh/Desktop/7600/e-shop/pages/seckill/seckill.uvue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","seckillGoodsData","BannerData","uni"],"mappings":";;;;;AAsIC,MAAA,YAAeA,8BAAA;AAAA,EACZ,OAAI;AACF,WAAO;AAAA,MACL,iBAAiB;AAAA,MACjB,eAAe;AAAA,MACf,YAAY;AAAA,MACZ,aAAaC,eAAqC;AAAA,MAClD,YAAYC,gBAA8B;AAAA;EAE7C;AAAA,EACD,SAAM;AACJ,QAAI,aAAaC,oBAAI;AACrB,SAAK,kBAAkB,WAAW;AAAA,EACnC;AAAA,EACD,SAAQ;AAAA;AAAA;AAAA;AAAA,IAIN,SAAM;AACJA,oBAAG,MAAC,aAAY;AAAA,IACjB;AAAA;AAAA;AAAA;AAAA;AAAA,IAKD,aAAa,GAAc;AACzB,UAAI,YAAmB,EAAE,OAAO;AAChC,UAAI,MAAM,YAAY;AACtB,WAAK,gBAAgB;AAErB,UAAG,OAAO,GAAE;AACV,aAAK,gBAAgB;AAAA,MACvB;AAAA,IACD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAOD,gBAAgB,OAAc,UAAiB,MAAY;AACzD,UAAI,MAAM,QAAQ;AAClB,UAAI,MAAO,WAAW,QAAS;AAC/B,aAAO,SAAS,IAAI,MAAM,KAAK,MAAM,MAAI,GAAG,IAAE;AAAA,IAC/C;AAAA,IACD,YAAY,OAAc,MAAY;AACpC,UAAI,WAAW,MAAM;AACrB,UAAI,QAAe,SAAS,MAAM,GAAG,EAAE,CAAC;AACxC,UAAI,MAAa;AACjB,UAAI;AACF,cAAM,SAAS,MAAM,GAAG,EAAE,CAAC;AAAA,MAC5B,SAAO,GAAE;AACR,cAAM;AAAA,MACR;AAEA,aAAO,SAAS,IAAI,QAAQ;AAAA,IAC7B;AAAA;AAAA;AAAA;AAAA;AAAA,IAKD,YAAY,MAAgB;AAC1BA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK,0CAA0C,KAAK,EAAE;AAAA,MACvD,CAAA;AAAA,IACF;AAAA;AAAA;AAAA;AAAA;AAAA,IAKD,aAAa,MAAY;AACvB,WAAK,aAAa;AAAA,IACpB;AAAA,EACF;CACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/MD,GAAG,WAAW,eAAe;"}