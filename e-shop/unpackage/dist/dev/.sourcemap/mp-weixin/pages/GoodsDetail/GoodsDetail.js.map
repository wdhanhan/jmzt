{"version":3,"file":"GoodsDetail.js","sources":["pages/GoodsDetail/GoodsDetail.uvue","../../../Downloads/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvR29vZHNEZXRhaWwvR29vZHNEZXRhaWwudXZ1ZQ"],"sourcesContent":["<template>\n  <!-- Â§ñÂ±ÇÂÆπÂô®ÔºöÊï¥È°µÂ∏ÉÂ±Ä -->\n  <view class=\"page\">\n\n    <!-- È°∂ÈÉ®ÂØºËà™ÔºöÂõ∫ÂÆöÂú®È°∂ÈÉ®Ôºå‰∏çÂÜçÊîæÂà∞ scroll-view Èáå -->\n    <view class=\"head-info\">\n\n      <!-- ÁôΩÂ∫ïÂ§¥ÈÉ®ÔºàÂêë‰∏ãÊªëÂä®Âá∫Áé∞Ôºâ -->\n      <view class=\"head-info-white\"\n        :style=\"{\n          height: (statusBarHeight+50)+'px',\n          paddingTop: statusBarHeight+'px',\n          opacity: pageScrollTop\n        }\"\n      >\n        <view class=\"back\" @click=\"onBack\">\n          <image src=\"/static/images/icon/back_icon1.png\" class=\"image\"></image>\n        </view>\n\n        <view class=\"head-item\">\n          <view class=\"item\" @click=\"onScrollView(0)\">\n            <text class=\"text\" :class=\"{'active': headCut===0}\">ÂïÜÂìÅ</text>\n          </view>\n          <view class=\"item\" @click=\"onScrollView(1)\">\n            <text class=\"text\" :class=\"{'active': headCut===1}\">Â∫óÈì∫</text>\n          </view>\n          <view class=\"item\" @click=\"onScrollView(2)\">\n            <text class=\"text\" :class=\"{'active': headCut===2}\">ËØÑ‰ª∑</text>\n          </view>\n          <view class=\"item\" @click=\"onScrollView(3)\">\n            <text class=\"text\" :class=\"{'active': headCut===3}\">ËØ¶ÊÉÖ</text>\n          </view>\n        </view>\n\n        <view class=\"operation-btn\">\n          <view class=\"btn\">\n            <image src=\"/static/images/icon/fx_icon1.png\" class=\"image\"></image>\n          </view>\n          <view class=\"btn\">\n            <image src=\"/static/images/icon/more_icon1.png\" class=\"image\"></image>\n          </view>\n        </view>\n      </view>\n\n      <!-- ÈÄèÊòéÂ§¥ÈÉ® -->\n      <view class=\"head-info-transparen\"\n        :style=\"{\n          height: (statusBarHeight+50)+'px',\n          paddingTop: statusBarHeight+'px'\n        }\"\n      >\n        <view class=\"back\" v-show=\"pageScrollTop <= 0\" @click=\"onBack\">\n          <image src=\"/static/images/icon/back_icon2.png\" class=\"image\"></image>\n        </view>\n\n        <view class=\"operation-btn\" v-show=\"pageScrollTop <= 0\">\n          <view class=\"btn\">\n            <image src=\"/static/images/icon/fx_icon2.png\" class=\"image\"></image>\n          </view>\n          <view class=\"btn\">\n            <image src=\"/static/images/icon/more_icon2.png\" class=\"image\"></image>\n          </view>\n        </view>\n      </view>\n\n    </view>\n\n    <!-- ‰∏≠Èó¥ÂÜÖÂÆπÔºöscroll-view Âè™Ë¥üË¥£ÊªöÂä®ÂÜÖÂÆπ -->\n    <scroll-view\n      class=\"page-scroll\"\n      scroll-y=\"true\"\n      :scroll-top=\"scrollTop\"\n      @scroll=\"onPageScroll\"\n      :style=\"{ flex: 1 }\"\n    >\n      <!-- ÁªôÂÜÖÂÆπÂä† paddingTop ÈÅøÂÖçË¢´ fixed ÁöÑ head-info Áõñ‰ΩèÔºå\n           Âä† paddingBottom ÈÅøÂÖçË¢´Â∫ïÈÉ®Ê†èÈÅÆ‰Ωè -->\n      <view\n        :style=\"{\n          paddingTop: (statusBarHeight + 50) + 'px',\n          paddingBottom: '140rpx'\n        }\"\n      >\n        <!-- Banner Â§öÂõæËΩÆÊí≠ -->\n        <view class=\"banner-info\" :style=\"{height: screenWidth+'px'}\">\n          <swiper class=\"swiper\"\n            :autoplay=\"true\"\n            :circular=\"true\"\n            :indicator-dots=\"false\"\n            @change=\"changeBanner\">\n\n            <swiper-item \n              v-for=\"(img,index) in info.images\" \n              :key=\"index\"\n            >\n              <image :src=\"img\" class=\"image\" mode=\"aspectFill\"></image>\n            </swiper-item>\n\n          </swiper>\n\n          <view class=\"indicator-dot\">\n            <view class=\"dots\"\n              v-for=\"(img,index) in info.images\"\n              :key=\"index\"\n              :class=\"{'active':bannerCurrent===index}\"/>\n          </view>\n        </view>\n\n        <!-- ÂïÜÂìÅ‰ø°ÊÅØ -->\n        <view class=\"goods-info\">\n          <view class=\"price-info\">\n            <view class=\"price\">\n              <text class=\"min\">Ôø•</text>\n              <text class=\"max\">{{ displayPrice }}</text>\n            </view>\n          </view>\n\n          <view class=\"goods-name\">\n            <view class=\"name\">\n              <text class=\"text\">{{info.name}}</text>\n            </view>\n          </view>\n\n          <view class=\"goods-desc\">\n            <text class=\"text\">\n              {{ info.description }}\n            </text>\n          </view>\n        </view>\n\n        <!-- ÂõæÊñáËØ¶ÊÉÖ -->\n        <view class=\"goods-detail\" ref=\"goodsDetail\">\n          <view class=\"title-info\">\n            <view class=\"title\">\n              <view class=\"line\"></view>\n              <text class=\"tit\">ÂõæÊñá‰ø°ÊÅØ</text>\n            </view>\n          </view>\n\n          <view class=\"content\">\n            <image \n              v-for=\"(img,index) in info.images\"\n              :key=\"index\"\n              :src=\"img\"\n              mode=\"widthFix\"\n              style=\"width:100%;margin-bottom:15rpx;\"\n            ></image>\n          </view>\n        </view>\n      </view>\n    </scroll-view>\n\n    <!-- Â∫ïÈÉ®ÊåâÈíÆÔºöÁßªÂà∞ scroll-view Â§ñÔºåÁúüÊ≠£ fixedÔºåÂú® iOS ‰∏äÂ∞±ËÉΩÁ®≥ÂÆöÊòæÁ§∫ -->\n    <view class=\"footer-info\">\n      <view class=\"footer-btn\">\n        <view class=\"btn\" @click=\"onCallService\">\n          <image src=\"/static/images/icon/kft_icon.png\" class=\"image\"></image>\n          <text class=\"text\">Âí®ËØ¢</text>\n        </view>\n      </view>\n\n      <view class=\"buy-info\">\n        <!-- ‚≠ê ËøôÈáåÁªßÁª≠Áî® openPopupÔºåÂÜÖÈÉ®Ë∞ÉÁî® $callMethod Ë∑üÊóßÁâà‰øùÊåÅ‰∏ÄËá¥ -->\n        <view class=\"add-cart-btn\" @click=\"openPopup('cart')\">\n          <text class=\"text\">Âä†ÂÖ•Ë¥≠Áâ©ËΩ¶</text>\n        </view>\n        <view class=\"buy-btn\" @click=\"openPopup('buy')\">\n          <text class=\"text\">Á´ãÂç≥Ë¥≠‰π∞</text>\n        </view>\n      </view>\n    </view>\n\n    <!-- SKU ÂºπÁ™óÔºàuts ÁªÑ‰ª∂ÔºâÔºö‰πüÊîæÂú® scroll-view Â§ñÊõ¥ÂÆâÂÖ® -->\n    <attr-popup ref=\"AttrPopup\" :info=\"info\"></attr-popup>\n  </view>\n</template>\n\n<script lang=\"uts\">\nimport AttrPopup from './components/AttrPopup/AttrPopup'\n\nexport default {\n  components: {\n    AttrPopup\n  },\n\n  data() {\n    return {\n      statusBarHeight: 0,\n      screenWidth: 0,\n      bannerCurrent: 0,\n      scrollTop: 0,\n      pageScrollTop: 0,\n      headCut: 0,\n      goodsId: 0,\n      info: { images: [], skus: [] },\n    };\n  },\n\n  computed: {\n    // ÊòæÁ§∫‰ª∑Ê†ºÔºö‰ºòÂÖàÁî®Á¨¨‰∏Ä‰∏™ SKU ÁöÑ‰ª∑Ê†ºÔºåÊ≤°ÊúâÂ∞±Áî®ÂïÜÂìÅ price\n    displayPrice() {\n      if (this.info.skus && this.info.skus.length > 0) {\n        return this.info.skus[0].price;\n      }\n      return this.info.price || 0;\n    }\n  },\n\n  onLoad(options) {\n    const w = uni.getWindowInfo();\n    this.statusBarHeight = w.statusBarHeight;\n    this.screenWidth = w.screenWidth;\n\n    this.goodsId = Number(options.goodsId || 0);\n    this.getData();\n  },\n\n  methods: {\n    onBack() {\n      uni.navigateBack();\n    },\n\n    // ‚≠ê Êã®ÊâìÂÆ¢ÊúçÁîµËØù\n    onCallService() {\n      uni.makePhoneCall({\n        phoneNumber: '0939-5959039',\n        fail: (err) => {\n          uni.__f__('error','at pages/GoodsDetail/GoodsDetail.uvue:228','Êã®ÊâìÁîµËØùÂ§±Ë¥•Ôºö', err);\n          uni.showToast({\n            title: 'Êó†Ê≥ïÂèëËµ∑ÁîµËØù',\n            icon: 'none'\n          });\n        }\n      });\n    },\n\n    // ÊãâÂèñÂêéÁ´ØÂïÜÂìÅËØ¶ÊÉÖÔºà‰Ω†Ëá™Â∑±ÁöÑ Node Êé•Âè£Ôºâ\n    getData() {\n      uni.request({\n        url: `https://wdxwhdglzx.jzzw-tech.cn/api/products/${this.goodsId}`,\n        method: \"GET\",\n        success: (res) => {\n          const data = res.data.data || {};\n          this.info = {\n            ...data,\n            images: data.images || [],\n          };\n        }\n      });\n    },\n\n    onPageScroll(e) {\n      const top = e.detail.scrollTop;\n      this.pageScrollTop = Math.min(top / 100, 1);\n      if (top <= 50) this.headCut = 0;\n    },\n\n    onScrollView(type) {\n      this.headCut = type;\n      if (type === 0) this.scrollTop = 0;\n      // ÂÖ∂‰ªñ tab ÁöÑÊªöÂä®‰Ω†ÂêéÈù¢Ë¶ÅÁöÑËØùÂÜçÂä† createSelectorQuery\n    },\n\n    changeBanner(e) {\n      this.bannerCurrent = e.detail.current;\n    },\n\n    /** üî• ÂºπËµ∑ SKU ÁªÑ‰ª∂ */\n    openPopup(type) {\n      if (this.$refs.AttrPopup && this.$refs.AttrPopup.$callMethod) {\n        this.$refs.AttrPopup.$callMethod('open', type);\n      } else {\n        uni.__f__('warn','at pages/GoodsDetail/GoodsDetail.uvue:273','AttrPopup ÂÆû‰æã‰∏äÊ≤°Êúâ $callMethodÔºåÊ£ÄÊü• AttrPopup ÊòØÂê¶‰∏∫ uvue / uts ÁªÑ‰ª∂');\n      }\n    },\n\n    onToShop() {\n      uni.showToast({ title: \"ÊöÇÊú™ÂÆûÁé∞\", icon: \"none\" });\n    }\n  },\n};\n</script>\n\n<style lang=\"scss\">\n  @import \"GoodsDetail.scss\";\n</style>\n","import MiniProgramPage from 'C:/Users/Ëã•Ê∂µ/Desktop/Êé•Âçï/e-shop/pages/GoodsDetail/GoodsDetail.uvue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","uni"],"mappings":";;;AAkLA,MAAO,YAAe,MAAA;AAEtB,MAAA,YAAeA,8BAAA;AAAA,EACb,YAAY;AAAA,IACV;AAAA,EACD;AAAA,EAED,OAAI;AACF,WAAO;AAAA,MACL,iBAAiB;AAAA,MACjB,aAAa;AAAA,MACb,eAAe;AAAA,MACf,WAAW;AAAA,MACX,eAAe;AAAA,MACf,SAAS;AAAA,MACT,SAAS;AAAA,MACT,MAAI,IAAA,cAAE,EAAE,QAAQ,CAAA,GAAI,MAAM,CAAA,GAAI;AAAA;EAEjC;AAAA,EAED,UAAU;AAAA;AAAA,IAER,eAAY;AACV,UAAI,KAAK,KAAK,QAAQ,KAAK,KAAK,KAAK,SAAS,GAAG;AAC/C,eAAO,KAAK,KAAK,KAAK,CAAC,EAAE;AAAA,MAC3B;AACA,aAAO,KAAK,KAAK,SAAS;AAAA,IAC5B;AAAA,EACD;AAAA,EAED,OAAO,SAAA;AACL,UAAM,IAAIC,oBAAI;AACd,SAAK,kBAAkB,EAAE;AACzB,SAAK,cAAc,EAAE;AAErB,SAAK,UAAU,OAAO,QAAQ,WAAW,CAAC;AAC1C,SAAK,QAAO;AAAA,EACb;AAAA,EAED,SAAS;AAAA,IACP,SAAM;AACJA,oBAAG,MAAC,aAAY;AAAA,IACjB;AAAA;AAAA,IAGD,gBAAa;AACXA,oBAAAA,MAAI,cAAc;AAAA,QAChB,aAAa;AAAA,QACb,MAAM,CAAC,QAAG;AACRA,wBAAG,MAAC,MAAM,SAAQ,6CAA4C,WAAW,GAAG;AAC5EA,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO;AAAA,YACP,MAAM;AAAA,UACP,CAAA;AAAA,QACH;AAAA,MACD,CAAA;AAAA,IACF;AAAA;AAAA,IAGD,UAAO;AACLA,oBAAAA,MAAI,QAAQ;AAAA,QACV,KAAK,gDAAgD,KAAK,OAAO;AAAA,QACjE,QAAQ;AAAA,QACR,SAAS,CAAC,QAAG;AACX,gBAAM,OAAO,IAAI,KAAK,QAAQ,CAAA;AAC9B,eAAK,OACA,OAAA,OAAA,OAAA,OAAA,CAAA,GAAA,IAAI,GACP,EAAA,QAAQ,KAAK,UAAU,CAAA;QAE3B;AAAA,MACD,CAAA;AAAA,IACF;AAAA,IAED,aAAa,IAAC,MAAA;AACZ,YAAM,MAAM,EAAE,OAAO;AACrB,WAAK,gBAAgB,KAAK,IAAI,MAAM,KAAK,CAAC;AAC1C,UAAI,OAAO;AAAI,aAAK,UAAU;AAAA,IAC/B;AAAA,IAED,aAAa,OAAI,MAAA;AACf,WAAK,UAAU;AACf,UAAI,SAAS;AAAG,aAAK,YAAY;AAAA,IAElC;AAAA,IAED,aAAa,IAAC,MAAA;AACZ,WAAK,gBAAgB,EAAE,OAAO;AAAA,IAC/B;AAAA;AAAA,IAGD,UAAU,OAAI,MAAA;AACZ,UAAI,KAAK,MAAM,aAAa,KAAK,MAAM,UAAU,aAAa;AAC5D,aAAK,MAAM,UAAU,YAAY,QAAQ,IAAI;AAAA,MAC7C,OAAK;AACLA,sBAAAA,MAAI,MAAM,QAAO,6CAA4C,4DAA4D;AAAA,MAC3H;AAAA,IACD;AAAA,IAED,WAAQ;AACNA,oBAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,OAAK,CAAG;AAAA,IAC/C;AAAA,EACD;CACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvRD,GAAG,WAAW,eAAe;"}