{"version":3,"file":"AfterSale.js","sources":["pages/AfterSale/AfterSale.uvue","../../../Downloads/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvQWZ0ZXJTYWxlL0FmdGVyU2FsZS51dnVl"],"sourcesContent":["<template>\n  <!-- 只支持小程序就用 scroll-view 包起来 -->\n  <scroll-view\n    class=\"page\"\n    scroll-y=\"true\"\n    style=\"flex: 1;\"\n  >\n    <!-- 顶部固定栏 -->\n    <!-- 内容整体，给头部留出空间 -->\n    <view>\n      <!-- 加载 / 错误提示 -->\n      <view class=\"tips-bar\" v-if=\"loading || errorMsg\">\n        <text v-if=\"loading\" class=\"tips-text\">正在加载退款相关订单...</text>\n        <text v-else class=\"tips-text error\">{{ errorMsg }}</text>\n      </view>\n\n      <!-- 可申请退款 -->\n      <view class=\"block\" v-if=\"refundableList.length\">\n        <view class=\"block-header\">\n          <view class=\"line\"></view>\n          <text class=\"title\">可申请退款的订单</text>\n        </view>\n\n        <view\n          class=\"order-card\"\n          v-for=\"item in refundableList\"\n          :key=\"item.id\"\n        >\n          <!-- 上：课程+金额+状态 -->\n          <view class=\"order-top\">\n            <view class=\"left\">\n              <view class=\"course-name\">\n                <text class=\"course\">\n                  {{ getFirstItemName(item) }}\n                </text>\n              </view>\n              <view class=\"tags\">\n                <text class=\"tag\">订单号：{{ item.order_no }}</text>\n              </view>\n            </view>\n            <view class=\"right\">\n              <view class=\"amount\">\n                <text class=\"min\">￥</text>\n                <text class=\"max\">{{ formatAmount(item.pay_amount) }}</text>\n              </view>\n              <view class=\"status\">\n                <text class=\"status-text\">已支付 · 72 小时内可退</text>\n              </view>\n            </view>\n          </view>\n\n          <!-- 中：学生信息 -->\n          <view class=\"order-middle\">\n            <view class=\"line-item\">\n              <text class=\"label\">姓名：</text>\n              <text class=\"value\">{{ item.user_name || '—' }}</text>\n            </view>\n            <view class=\"line-item\">\n              <text class=\"label\">学校：</text>\n              <text class=\"value\">{{ item.student_school || '—' }}</text>\n            </view>\n            <view class=\"line-item\">\n              <text class=\"label\">年级：</text>\n              <text class=\"value\">{{ item.student_grade || '—' }}</text>\n            </view>\n          </view>\n\n          <!-- 下：时间 + 按钮 -->\n          <view class=\"order-bottom\">\n            <view class=\"time-info\">\n              <text class=\"time-text\">\n                下单时间：{{ formatTimePlus8(item.created_at) }}\n              </text>\n              <text class=\"time-text\">\n                支付时间：{{ formatTimePlus8(item.pay_time) }}\n              </text>\n            </view>\n            <view class=\"btn-area\">\n              <view class=\"btn-refund\" @click=\"openReasonPopup(item)\">\n                <text class=\"text\">申请退款</text>\n              </view>\n            </view>\n          </view>\n        </view>\n      </view>\n\n      <!-- 退款处理中 -->\n      <view class=\"block\" v-if=\"processingList.length\">\n        <view class=\"block-header\">\n          <view class=\"line\"></view>\n          <text class=\"title\">退款处理中</text>\n        </view>\n\n        <view\n          class=\"order-card processing\"\n          v-for=\"item in processingList\"\n          :key=\"item.id\"\n        >\n          <view class=\"order-top\">\n            <view class=\"left\">\n              <view class=\"course-name\">\n                <text class=\"course\">\n                  {{ getFirstItemName(item) }}\n                </text>\n              </view>\n              <view class=\"tags\">\n                <text class=\"tag\">订单号：{{ item.order_no }}</text>\n              </view>\n            </view>\n            <view class=\"right\">\n              <view class=\"amount\">\n                <text class=\"min\">￥</text>\n                <text class=\"max\">{{ formatAmount(item.pay_amount) }}</text>\n              </view>\n              <view class=\"status\">\n                <text class=\"status-text processing\">退款处理中</text>\n              </view>\n            </view>\n          </view>\n\n          <view class=\"order-middle\">\n            <view class=\"line-item\">\n              <text class=\"label\">退款原因：</text>\n              <text class=\"value\">\n                {{ item.refund_reason || '用户发起退款，等待处理' }}\n              </text>\n            </view>\n          </view>\n\n          <view class=\"order-bottom\">\n            <view class=\"time-info\">\n              <text class=\"time-text\">\n                支付时间：{{ formatTimePlus8(item.pay_time) }}\n              </text>\n            </view>\n          </view>\n        </view>\n      </view>\n\n      <!-- 如果两个列表都为空，给个空状态 -->\n      <view\n        v-if=\"!loading && !errorMsg && !refundableList.length && !processingList.length\"\n        class=\"empty\"\n      >\n        <image src=\"/static/images/icon/null_icon.png\" class=\"empty-img\"></image>\n        <text class=\"empty-text\">暂时没有可申请退款或退款中的订单</text>\n      </view>\n    </view>\n\n    <!-- 退款原因弹窗 -->\n    <view\n      v-if=\"showReasonPopup\"\n      class=\"mask\"\n    >\n      <!-- 不再绑定关闭事件，只有按钮能关 -->\n      <view class=\"popup\">\n        <view class=\"popup-header\">\n          <text class=\"title\">申请退款</text>\n        </view>\n\n        <view class=\"popup-body\">\n          <view class=\"row\">\n            <text class=\"label\">订单号：</text>\n            <text class=\"value\">\n              {{ currentOrder ? currentOrder.order_no : '' }}\n            </text>\n          </view>\n          <view class=\"row\">\n            <text class=\"label\">实付金额：</text>\n            <text class=\"value amount\">\n              ￥{{ currentOrder ? formatAmount(currentOrder.pay_amount) : '0.00' }}\n            </text>\n          </view>\n          <view class=\"row\">\n            <text class=\"label\">课程：</text>\n            <text class=\"value\">\n              {{ currentOrder ? getFirstItemName(currentOrder) : '' }}\n            </text>\n          </view>\n\n          <view class=\"reason-box\">\n            <text class=\"label\">退款原因（必填）：</text>\n            <textarea\n              class=\"textarea\"\n              v-model=\"refundReason\"\n              placeholder=\"请填写退款原因，如时间冲突、孩子无法参加等\"\n              maxlength=\"200\"\n              auto-height\n            />\n            <view class=\"count\">\n              <text class=\"text\">{{ refundReason.length }}/200</text>\n            </view>\n          </view>\n        </view>\n\n        <view class=\"popup-footer\">\n          <view class=\"btn cancel\" @click=\"closeReasonPopup\">\n            <text class=\"text\">取消</text>\n          </view>\n          <view class=\"btn submit\" @click=\"submitRefund\">\n            <text class=\"text\">提交申请</text>\n          </view>\n        </view>\n      </view>\n    </view>\n  </scroll-view>\n</template>\n\n<script lang=\"uts\">\nconst API_BASE = 'https://wdxwhdglzx.jzzw-tech.cn';\n\nexport default {\n  data() {\n    return {\n      statusBarHeight: 0,\n\n      loading: false,\n      errorMsg: '',\n\n      // 后端返回的两个核心列表\n      refundableList: [],   // 可申请退款的订单\n      processingList: [],   // 退款中的订单\n\n      // 弹窗相关\n      showReasonPopup: false,\n      currentOrder: null,\n      refundReason: '',\n    };\n  },\n\n  onLoad() {\n    const win = uni.getWindowInfo();\n    this.statusBarHeight = win.statusBarHeight;\n    this.loadRefundOrders();\n  },\n\n  methods: {\n    // 返回\n    onBack() {\n      uni.navigateBack();\n    },\n\n    // 加载可申请退款 & 退款中的订单\n    loadRefundOrders() {\n      const openid = uni.getStorageSync('openid');\n\n      if (!openid) {\n        this.errorMsg = '未找到 openid，请先登录后再试';\n        uni.showToast({\n          title: '请先登录',\n          icon: 'none',\n        });\n        return;\n      }\n\n      this.loading = true;\n      this.errorMsg = '';\n\n      uni.request({\n        url: `${API_BASE}/api/order/refund/list`,\n        method: 'GET',\n        data: { openid },\n        success: (res) => {\n          const body = res.data || {};\n          if (body.code !== 200) {\n            this.errorMsg = body.msg || '接口返回错误';\n            return;\n          }\n\n          const data = body.data || {};\n          this.refundableList = data.refundable_orders || [];\n          this.processingList = data.refund_processing_orders || [];\n        },\n        fail: () => {\n          this.errorMsg = '网络请求失败，请稍后重试';\n        },\n        complete: () => {\n          this.loading = false;\n        },\n      });\n    },\n\n    // 格式化金额\n    formatAmount(v) {\n      const n = Number(v || 0);\n      return n.toFixed(2);\n    },\n\n    // +8 小时的时间格式化\n    formatTimePlus8(t) {\n      if (!t) return '—';\n      const d = new Date(t);\n      if (isNaN(d.getTime())) return String(t);\n      const ts = d.getTime();\n      const dd = new Date(ts);\n      const y = dd.getFullYear();\n      const m = (dd.getMonth() + 1).toString().padStart(2, '0');\n      const day = dd.getDate().toString().padStart(2, '0');\n      const hh = dd.getHours().toString().padStart(2, '0');\n      const mm = dd.getMinutes().toString().padStart(2, '0');\n      const ss = dd.getSeconds().toString().padStart(2, '0');\n      return `${y}-${m}-${day} ${hh}:${mm}:${ss}`;\n    },\n\n    // 从 items_snapshot 里取出第一个课程名称\n    getFirstItemName(order) {\n      if (!order || !order.items_snapshot) return '课程';\n      try {\n        const arr = JSON.parse(order.items_snapshot);\n        if (Array.isArray(arr) && arr.length > 0) {\n          const it = arr[0];\n          return it.product_name || it.name || '课程';\n        }\n      } catch (e) {}\n      return '课程';\n    },\n\n    // 打开原因弹窗\n    openReasonPopup(order) {\n      this.currentOrder = order;\n      this.refundReason = '';\n      this.showReasonPopup = true;\n    },\n\n    // 关闭弹窗\n    closeReasonPopup() {\n      this.showReasonPopup = false;\n      this.currentOrder = null;\n      this.refundReason = '';\n    },\n\n    // 提交退款申请\n    submitRefund() {\n      if (!this.currentOrder) return;\n\n      const reason = this.refundReason.trim();\n      if (!reason || reason.length < 5) {\n        uni.showToast({\n          title: '请至少填写 5 个字的退款原因',\n          icon: 'none',\n        });\n        return;\n      }\n\n      const openid = uni.getStorageSync('openid');\n      if (!openid) {\n        uni.showToast({\n          title: '请先登录',\n          icon: 'none',\n        });\n        return;\n      }\n\n      uni.showLoading({ title: '提交中...' });\n\n      uni.request({\n        url: `${API_BASE}/api/order/refund/apply`,\n        method: 'POST',\n        header: {\n          'content-type': 'application/json',\n        },\n        data: {\n          openid,\n          order_id: this.currentOrder.id,\n          reason: reason,\n        },\n        success: (res) => {\n          const body = res.data || {};\n          if (body.code === 200) {\n            uni.showToast({\n              title: '申请已提交',\n              icon: 'success',\n            });\n            this.closeReasonPopup();\n            this.loadRefundOrders();\n          } else {\n            uni.showToast({\n              title: body.msg || '申请失败',\n              icon: 'none',\n            });\n          }\n        },\n        fail: () => {\n          uni.showToast({\n            title: '网络错误，请稍后再试',\n            icon: 'none',\n          });\n        },\n        complete: () => {\n          uni.hideLoading();\n        },\n      });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n.page {\n  background-color: #f5f5f5;\n  min-height: 100vh;\n}\n\n/* 顶部栏 */\n.head-info {\n  position: fixed;\n  z-index: 100;\n  left: 0;\n  top: 0;\n  width: 100%;\n  padding: 0 24rpx;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  background-color: #ffffff;\n  box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.06);\n\n  .back {\n    width: 80rpx;\n    display: flex;\n    align-items: center;\n    justify-content: flex-start;\n\n    .image {\n      width: 40rpx;\n      height: 40rpx;\n    }\n  }\n\n  .title {\n    flex: 1;\n    display: flex;\n    justify-content: center;\n\n    .text {\n      font-size: 32rpx;\n      font-weight: 600;\n      color: #111827;\n    }\n  }\n}\n\n/* 提示条 */\n.tips-bar {\n  padding: 16rpx 28rpx 0 28rpx;\n\n  .tips-text {\n    font-size: 26rpx;\n    color: #6b7280;\n  }\n\n  .error {\n    color: #e11d48;\n  }\n}\n\n/* 块 */\n.block {\n  padding: 20rpx 24rpx 0 24rpx;\n\n  .block-header {\n    display: flex;\n    align-items: center;\n    margin-bottom: 8rpx;\n\n    .line {\n      width: 8rpx;\n      height: 28rpx;\n      border-radius: 4rpx;\n      background-color: #3b82f6;\n      margin-right: 10rpx;\n    }\n\n    .title {\n      font-size: 30rpx;\n      font-weight: 600;\n      color: #111827;\n    }\n  }\n}\n\n/* 订单卡片 */\n.order-card {\n  margin-top: 12rpx;\n  padding: 20rpx;\n  border-radius: 16rpx;\n  background-color: #ffffff;\n  box-shadow: 0 4rpx 10rpx rgba(15, 23, 42, 0.04);\n\n  &.processing {\n    border: 1rpx solid #bfdbfe;\n  }\n\n  .order-top {\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n\n    .left {\n      flex: 1;\n      padding-right: 20rpx;\n\n      .course-name {\n        margin-bottom: 4rpx;\n\n        .course {\n          font-size: 30rpx;\n          color: #111827;\n          font-weight: 600;\n        }\n      }\n\n      .tags {\n        .tag {\n          font-size: 24rpx;\n          color: #6b7280;\n        }\n      }\n    }\n\n    .right {\n      display: flex;\n      flex-direction: column;\n      align-items: flex-end;\n      justify-content: flex-start;\n\n      .amount {\n        display: flex;\n        align-items: baseline;\n\n        .min {\n          font-size: 24rpx;\n          color: #ef4444;\n        }\n\n        .max {\n          font-size: 32rpx;\n          font-weight: 700;\n          color: #ef4444;\n          margin-left: 2rpx;\n        }\n      }\n\n      .status {\n        margin-top: 4rpx;\n\n        .status-text {\n          font-size: 22rpx;\n          color: #059669;\n        }\n\n        .processing {\n          color: #1d4ed8;\n        }\n      }\n    }\n  }\n\n  .order-middle {\n    margin-top: 12rpx;\n    padding-top: 12rpx;\n    border-top: 1rpx dashed #e5e7eb;\n\n    .line-item {\n      display: flex;\n      margin-bottom: 4rpx;\n\n      .label {\n        font-size: 24rpx;\n        color: #6b7280;\n        width: 120rpx;\n      }\n\n      .value {\n        font-size: 24rpx;\n        color: #111827;\n        flex: 1;\n      }\n    }\n  }\n\n  .order-bottom {\n    margin-top: 12rpx;\n    padding-top: 12rpx;\n    border-top: 1rpx solid #f3f4f6;\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    align-items: center;\n\n    .time-info {\n      flex: 1;\n      padding-right: 20rpx;\n\n      .time-text {\n        font-size: 22rpx;\n        color: #6b7280;\n        display: block;\n      }\n    }\n\n    .btn-area {\n      .btn-refund {\n        padding: 10rpx 26rpx;\n        border-radius: 999rpx;\n        border: 1rpx solid #ef4444;\n\n        .text {\n          font-size: 24rpx;\n          color: #ef4444;\n        }\n      }\n    }\n  }\n}\n\n/* 空状态 */\n.empty {\n  padding: 80rpx 24rpx;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  .empty-img {\n    width: 160rpx;\n    height: 160rpx;\n    margin-bottom: 20rpx;\n  }\n\n  .empty-text {\n    font-size: 26rpx;\n    color: #9ca3af;\n  }\n}\n\n/* 弹窗蒙层 */\n.mask {\n  position: fixed;\n  z-index: 999;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(15, 23, 42, 0.45);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n/* 弹窗 */\n.popup {\n  width: 86%;\n  max-width: 680rpx;\n  background-color: #ffffff;\n  border-radius: 20rpx;\n  padding: 20rpx 22rpx 16rpx 22rpx;\n  box-shadow: 0 16rpx 40rpx rgba(15, 23, 42, 0.35);\n  display: flex;\n  flex-direction: column;\n\n  .popup-header {\n    margin-bottom: 10rpx;\n\n    .title {\n      font-size: 30rpx;\n      font-weight: 600;\n      color: #111827;\n    }\n  }\n\n  .popup-body {\n    .row {\n      display: flex;\n      margin-bottom: 4rpx;\n\n      .label {\n        font-size: 24rpx;\n        color: #6b7280;\n        width: 150rpx;\n      }\n\n      .value {\n        font-size: 24rpx;\n        color: #111827;\n        flex: 1;\n      }\n\n      .amount {\n        color: #ef4444;\n        font-weight: 600;\n      }\n    }\n\n    .reason-box {\n      margin-top: 12rpx;\n\n      .label {\n        font-size: 24rpx;\n        color: #6b7280;\n      }\n\n      .textarea {\n        margin-top: 8rpx;\n        min-height: 120rpx;\n        max-height: 260rpx;\n        padding: 12rpx;\n        border-radius: 12rpx;\n        border: 1rpx solid #e5e7eb;\n        background-color: #f9fafb;\n        font-size: 24rpx;\n        color: #111827;\n      }\n\n      .count {\n        margin-top: 4rpx;\n        display: flex;\n        justify-content: flex-end;\n\n        .text {\n          font-size: 22rpx;\n          color: #9ca3af;\n        }\n      }\n    }\n  }\n\n  .popup-footer {\n    margin-top: 16rpx;\n    display: flex;\n    justify-content: flex-end;\n\n    .btn {\n      min-width: 140rpx;\n      padding: 12rpx 0;\n      border-radius: 999rpx;\n      margin-left: 10rpx;\n      justify-content: center;\n      align-items: center;\n      display: flex;\n\n      .text {\n        font-size: 26rpx;\n      }\n    }\n\n    .cancel {\n      background-color: #f3f4f6;\n\n      .text {\n        color: #6b7280;\n      }\n    }\n\n    .submit {\n      background-color: #ef4444;\n\n      .text {\n        color: #ffffff;\n      }\n    }\n  }\n}\n</style>\n","import MiniProgramPage from 'C:/Users/若涵/Desktop/接单/e-shop/pages/AfterSale/AfterSale.uvue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","uni"],"mappings":";;;AAiNA,MAAM,WAAW;AAEjB,MAAA,YAAeA,8BAAA;AAAA,EACb,OAAI;AACF,WAAO;AAAA,MACL,iBAAiB;AAAA,MAEjB,SAAS;AAAA,MACT,UAAU;AAAA;AAAA,MAGV,gBAAgB,CAAE;AAAA,MAClB,gBAAgB,CAAE;AAAA;AAAA,MAGlB,iBAAiB;AAAA,MACjB,cAAc;AAAA,MACd,cAAc;AAAA;EAEjB;AAAA,EAED,SAAM;AACJ,UAAM,MAAMC,oBAAI;AAChB,SAAK,kBAAkB,IAAI;AAC3B,SAAK,iBAAgB;AAAA,EACtB;AAAA,EAED,SAAS;AAAA;AAAA,IAEP,SAAM;AACJA,oBAAG,MAAC,aAAY;AAAA,IACjB;AAAA;AAAA,IAGD,mBAAgB;AACd,YAAM,SAASA,cAAAA,MAAI,eAAe,QAAQ;AAE1C,UAAI,CAAC,QAAQ;AACX,aAAK,WAAW;AAChBA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACP,CAAA;AACD,eAAM;AAAA,MACR;AAEA,WAAK,UAAU;AACf,WAAK,WAAW;AAEhBA,oBAAAA,MAAI,QAAQ;AAAA,QACV,KAAK,GAAG,QAAQ;AAAA,QAChB,QAAQ;AAAA,QACR,MAAM,IAAA,cAAA,EAAE,QAAQ;AAAA,QAChB,SAAS,CAAC,QAAG;AACX,gBAAM,OAAO,IAAI,QAAQ;AACzB,cAAI,KAAK,SAAS,KAAK;AACrB,iBAAK,WAAW,KAAK,OAAO;AAC5B,mBAAM;AAAA,UACR;AAEA,gBAAM,OAAO,KAAK,QAAQ;AAC1B,eAAK,iBAAiB,KAAK,qBAAqB,CAAA;AAChD,eAAK,iBAAiB,KAAK,4BAA4B,CAAA;AAAA,QACxD;AAAA,QACD,MAAM,MAAA;AACJ,eAAK,WAAW;AAAA,QACjB;AAAA,QACD,UAAU,MAAA;AACR,eAAK,UAAU;AAAA,QAChB;AAAA,MACF,CAAA;AAAA,IACF;AAAA;AAAA,IAGD,aAAa,IAAC,MAAA;AACZ,YAAM,IAAI,OAAO,KAAK,CAAC;AACvB,aAAO,EAAE,QAAQ,CAAC;AAAA,IACnB;AAAA;AAAA,IAGD,gBAAgB,IAAC,MAAA;AACf,UAAI,CAAC;AAAG,eAAO;AACf,YAAM,IAAI,IAAI,KAAK,CAAC;AACpB,UAAI,MAAM,EAAE,SAAS;AAAG,eAAO,OAAO,CAAC;AACvC,YAAM,KAAK,EAAE;AACb,YAAM,KAAK,IAAI,KAAK,EAAE;AACtB,YAAM,IAAI,GAAG;AACb,YAAM,KAAK,GAAG,aAAa,GAAG,SAAQ,EAAG,SAAS,GAAG,GAAG;AACxD,YAAM,MAAM,GAAG,QAAS,EAAC,SAAQ,EAAG,SAAS,GAAG,GAAG;AACnD,YAAM,KAAK,GAAG,SAAU,EAAC,SAAQ,EAAG,SAAS,GAAG,GAAG;AACnD,YAAM,KAAK,GAAG,WAAY,EAAC,SAAQ,EAAG,SAAS,GAAG,GAAG;AACrD,YAAM,KAAK,GAAG,WAAY,EAAC,SAAQ,EAAG,SAAS,GAAG,GAAG;AACrD,aAAO,GAAG,CAAC,IAAI,CAAC,IAAI,GAAG,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE;AAAA,IAC1C;AAAA;AAAA,IAGD,iBAAiB,QAAK,MAAA;AACpB,UAAI,CAAC,SAAS,CAAC,MAAM;AAAgB,eAAO;AAC5C,UAAI;AACF,cAAM,MAAM,IAAK,KAAA,MAAM,MAAM,cAAc;AAC3C,YAAI,MAAM,QAAQ,GAAG,KAAK,IAAI,SAAS,GAAG;AACxC,gBAAM,KAAK,IAAI,CAAC;AAChB,iBAAO,GAAG,gBAAgB,GAAG,QAAQ;AAAA,QACvC;AAAA,MACA,SAAO,GAAG;AAAA,MAAC;AACb,aAAO;AAAA,IACR;AAAA;AAAA,IAGD,gBAAgB,QAAK,MAAA;AACnB,WAAK,eAAe;AACpB,WAAK,eAAe;AACpB,WAAK,kBAAkB;AAAA,IACxB;AAAA;AAAA,IAGD,mBAAgB;AACd,WAAK,kBAAkB;AACvB,WAAK,eAAe;AACpB,WAAK,eAAe;AAAA,IACrB;AAAA;AAAA,IAGD,eAAY;AACV,UAAI,CAAC,KAAK;AAAc,eAAM;AAE9B,YAAM,SAAS,KAAK,aAAa,KAAI;AACrC,UAAI,CAAC,UAAU,OAAO,SAAS,GAAG;AAChCA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACP,CAAA;AACD,eAAM;AAAA,MACR;AAEA,YAAM,SAASA,cAAAA,MAAI,eAAe,QAAQ;AAC1C,UAAI,CAAC,QAAQ;AACXA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACP,CAAA;AACD,eAAM;AAAA,MACR;AAEAA,oBAAAA,MAAI,YAAY,EAAE,OAAO,SAAU,CAAA;AAEnCA,oBAAAA,MAAI,QAAQ;AAAA,QACV,KAAK,GAAG,QAAQ;AAAA,QAChB,QAAQ;AAAA,QACR,QAAQ,IAAA,cAAA;AAAA,UACN,gBAAgB;AAAA,SACjB;AAAA,QACD,MAAM,IAAA,cAAA;AAAA,UACJ;AAAA,UACA,UAAU,KAAK,aAAa;AAAA,UAC5B;AAAA,SACD;AAAA,QACD,SAAS,CAAC,QAAG;AACX,gBAAM,OAAO,IAAI,QAAQ;AACzB,cAAI,KAAK,SAAS,KAAK;AACrBA,0BAAAA,MAAI,UAAU;AAAA,cACZ,OAAO;AAAA,cACP,MAAM;AAAA,YACP,CAAA;AACD,iBAAK,iBAAgB;AACrB,iBAAK,iBAAgB;AAAA,UACrB,OAAK;AACLA,0BAAAA,MAAI,UAAU;AAAA,cACZ,OAAO,KAAK,OAAO;AAAA,cACnB,MAAM;AAAA,YACP,CAAA;AAAA,UACH;AAAA,QACD;AAAA,QACD,MAAM,MAAA;AACJA,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO;AAAA,YACP,MAAM;AAAA,UACP,CAAA;AAAA,QACF;AAAA,QACD,UAAU,MAAA;AACRA,wBAAG,MAAC,YAAW;AAAA,QAChB;AAAA,MACF,CAAA;AAAA,IACF;AAAA,EACF;CACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzYD,GAAG,WAAW,eAAe;"}