{"version":3,"file":"ConfirmOrder.js","sources":["pages/ConfirmOrder/ConfirmOrder.uvue","../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvQ29uZmlybU9yZGVyL0NvbmZpcm1PcmRlci51dnVl"],"sourcesContent":["<template>\r\n\r\n\r\n\r\n\r\n    <view :style=\"{ paddingBottom: (statusBarBottom + 50) + 'px' }\">\r\n\r\n      <!-- 用户信息（姓名 / 手机 / 身份证 / 学校 / 年级） -->\r\n      <view class=\"user-info\">\r\n        <view class=\"user-item\">\r\n          <view class=\"label\">\r\n            <text class=\"text\">学生姓名</text>\r\n          </view>\r\n          <view class=\"input-wrap\">\r\n            <input\r\n              class=\"input\"\r\n              type=\"text\"\r\n              v-model=\"realName\"\r\n              placeholder=\"请输入学生姓名\"\r\n            />\r\n          </view>\r\n        </view>\r\n\r\n        <view class=\"user-item\">\r\n          <view class=\"label\">\r\n            <text class=\"text\">家长电话</text>\r\n          </view>\r\n          <view class=\"input-wrap\">\r\n            <input\r\n              class=\"input\"\r\n              type=\"number\"\r\n              v-model=\"mobile\"\r\n              placeholder=\"请输入手机号\"\r\n            />\r\n          </view>\r\n        </view>\r\n\r\n        <view class=\"user-item\">\r\n          <view class=\"label\">\r\n            <text class=\"text\">学生身份证</text>\r\n          </view>\r\n          <view class=\"input-wrap\">\r\n            <input\r\n              class=\"input\"\r\n              type=\"text\"\r\n              v-model=\"idCardNo\"\r\n              placeholder=\"请输入身份证号\"\r\n            />\r\n          </view>\r\n        </view>\r\n\r\n        <view class=\"user-item\">\r\n          <view class=\"label\">\r\n            <text class=\"text\">现就读学校</text>\r\n          </view>\r\n          <view class=\"input-wrap\">\r\n            <input\r\n              class=\"input\"\r\n              type=\"text\"\r\n              v-model=\"studentSchool\"\r\n              placeholder=\"请输入学生就读学校\"\r\n            />\r\n          </view>\r\n        </view>\r\n\r\n        <view class=\"user-item\">\r\n          <view class=\"label\">\r\n            <text class=\"text\">就读年级</text>\r\n          </view>\r\n          <view class=\"input-wrap\">\r\n            <input\r\n              class=\"input\"\r\n              type=\"text\"\r\n              v-model=\"studentGrade\"\r\n              placeholder=\"请输入学生就读年级\"\r\n            />\r\n          </view>\r\n        </view>\r\n      </view>\r\n\r\n      <!-- 店铺 / 商品列表（多件） -->\r\n      <view class=\"shop-goods\">\r\n        <view class=\"shop-list\">\r\n          <view class=\"shop-name\">\r\n            <view class=\"icon\">\r\n              <image src=\"/static/images/icon/shop_icon.png\" class=\"image\"></image>\r\n            </view>\r\n            <view class=\"name\">\r\n              <text class=\"text\">商家</text>\r\n            </view>\r\n          </view>\r\n\r\n          <view class=\"goods-list\">\r\n            <view\r\n              class=\"list\"\r\n              v-for=\"(item, index) in items\"\r\n              :key=\"index\"\r\n            >\r\n              <view class=\"pic\">\r\n                <image :src=\"item.image || ''\" class=\"image\"></image>\r\n              </view>\r\n              <view class=\"info\">\r\n                <view class=\"name\">\r\n                  <text class=\"text\">{{ item.name || item.product_name || '商品' }}</text>\r\n                </view>\r\n                <view class=\"attr\">\r\n                  <text class=\"text\">\r\n                    {{ item.sku_name || '默认规格' }}\r\n                  </text>\r\n                </view>\r\n                <view class=\"price-number\">\r\n                  <view class=\"price\">\r\n                    <text class=\"min\">￥</text>\r\n                    <text class=\"max\">{{ formatPrice(item.price).int }}</text>\r\n                    <text class=\"min\">.{{ formatPrice(item.price).dec }}</text>\r\n                  </view>\r\n                  <view class=\"number\">\r\n                    <text class=\"text\">x{{ item.quantity }}</text>\r\n                  </view>\r\n                </view>\r\n              </view>\r\n            </view>\r\n\r\n            <view v-if=\"items.length === 0\" style=\"padding: 40rpx; text-align: center;\">\r\n              <text class=\"text\" style=\"color:#999;font-size:26rpx;\">暂无商品</text>\r\n            </view>\r\n          </view>\r\n        </view>\r\n      </view>\r\n\r\n      <!-- 订单金额信息 -->\r\n      <view class=\"order-info\">\r\n        <view class=\"order-item\">\r\n          <view class=\"item\">\r\n            <view class=\"title\">\r\n              <text class=\"text\">商品总额</text>\r\n            </view>\r\n            <view class=\"content\">\r\n              <view class=\"price\">\r\n                <text class=\"text\">\r\n                  ￥{{ formatPrice(goodsTotal).int }}.{{ formatPrice(goodsTotal).dec }}\r\n                </text>\r\n              </view>\r\n            </view>\r\n          </view>\r\n        </view>\r\n\r\n        <view class=\"total-price\">\r\n          <view class=\"tit\">\r\n            <text class=\"text\">合计：</text>\r\n          </view>\r\n          <view class=\"price\">\r\n            <text class=\"text\">\r\n              ￥{{ formatPrice(payAmount).int }}.{{ formatPrice(payAmount).dec }}\r\n            </text>\r\n          </view>\r\n        </view>\r\n      </view>\r\n\r\n      <!-- 底部提交条 -->\r\n      <view class=\"footer-info\" :style=\"{ paddingBottom: statusBarBottom + 'px' }\">\r\n        <view class=\"price-info\">\r\n          <view class=\"title\">\r\n            <text class=\"text\">实付款：</text>\r\n          </view>\r\n          <view class=\"price\">\r\n            <text class=\"min\">￥</text>\r\n            <text class=\"max\">{{ formatPrice(payAmount).int }}</text>\r\n            <text class=\"min\">.{{ formatPrice(payAmount).dec }}</text>\r\n          </view>\r\n        </view>\r\n        <view class=\"btn-info\">\r\n          <view class=\"btn\" @click=\"onSubmit\">\r\n            <text class=\"text\">{{ submitting ? '提交中...' : '提交订单并支付' }}</text>\r\n          </view>\r\n        </view>\r\n      </view>\r\n    </view>\r\n\r\n\r\n\r\n\r\n</template>\r\n\r\n\r\n\r\n<script lang=\"uts\">\r\n  // 固定写死，避免因为 data 里没值导致传 0 / 空\r\n  const WX_APPID = 'wx506c944851f9f1eb'\r\n  const WX_MCHID = '1732393234'\r\n\r\n  export default {\r\n    data() {\r\n      return {\r\n        statusBarBottom: 0,\r\n\r\n        // 多件商品列表，onLoad 里通过 eventChannel 赋值\r\n        items: [] as Array<any>,\r\n\r\n        realName: '',\r\n        mobile: '',\r\n        idCardNo: '',\r\n        studentSchool: '',   // 就读学校\r\n        studentGrade: '',    // 就读年级\r\n\r\n        submitting: false\r\n      }\r\n    },\r\n\r\n    computed: {\r\n      // 商品总价 = 所有 (price * quantity) 合计\r\n      goodsTotal(): number {\r\n        let sum = 0\r\n        this.items.forEach((it: any) => {\r\n          const price = Number(it.price || 0)\r\n          const qty = Number(it.quantity || 0)\r\n          sum += price * qty\r\n        })\r\n        return sum\r\n      },\r\n\r\n      // 实付金额，暂时 = 商品总价\r\n      payAmount(): number {\r\n        return this.goodsTotal\r\n      }\r\n    },\r\n\r\n    onLoad(options: UTSJSONObject) {\r\n      const windowInfo = uni.getWindowInfo()\r\n      this.statusBarBottom = windowInfo.safeAreaInsets.bottom\r\n\r\n      // 通过 eventChannel 接收上个页面传来的 items\r\n      const self = this as any\r\n      if (self.getOpenerEventChannel) {\r\n        const eventChannel = self.getOpenerEventChannel()\r\n        eventChannel.on('orderData', (data: any) => {\r\n          uni.__f__('log','at pages/ConfirmOrder/ConfirmOrder.uvue:237','ConfirmOrder 收到 orderData:', data)\r\n          if (data && Array.isArray(data.items)) {\r\n            this.items = data.items\r\n          } else {\r\n            this.items = []\r\n          }\r\n\r\n          if (this.items.length === 0) {\r\n            uni.showToast({\r\n              title: '订单商品为空',\r\n              icon: 'none'\r\n            })\r\n          }\r\n        })\r\n      } else {\r\n        uni.__f__('warn','at pages/ConfirmOrder/ConfirmOrder.uvue:252','getOpenerEventChannel 不存在，可能不是通过 navigateTo 打开的')\r\n      }\r\n    },\r\n\r\n    methods: {\r\n      // 价格格式化，返回 { int, dec }\r\n      formatPrice(v: number | string) {\r\n        const n = Number(v || 0)\r\n        const s = n.toFixed(2)\r\n        const arr = s.split('.')\r\n        return {\r\n          int: arr[0],\r\n          dec: arr[1] || '00'\r\n        }\r\n      },\r\n\r\n      // 提交订单 + 调起微信支付\r\n      onSubmit() {\r\n        if (this.submitting) return\r\n\r\n        // 1. 姓名必填\r\n        if (!this.realName) {\r\n          uni.showToast({ title: '请输入姓名', icon: 'none' })\r\n          return\r\n        }\r\n\r\n        // 2. 手机号：必填 + 11 位数字\r\n        if (!this.mobile) {\r\n          uni.showToast({ title: '请输入手机号', icon: 'none' })\r\n          return\r\n        }\r\n        const mobileStr = String(this.mobile).trim()\r\n        const mobileReg = /^[0-9]{11}$/\r\n        if (!mobileReg.test(mobileStr)) {\r\n          uni.showToast({ title: '手机号需为11位数字', icon: 'none' })\r\n          return\r\n        }\r\n\r\n        // 3. 身份证：必填 + 18 位数字\r\n        if (!this.idCardNo) {\r\n          uni.showToast({ title: '请输入身份证号', icon: 'none' })\r\n          return\r\n        }\r\n        const idStr = String(this.idCardNo).trim()\r\n        const idReg = /^[0-9]{17}[0-9Xx]$/   // 如果以后要支持 X，可改为 /^[0-9]{17}[0-9Xx]$/\r\n        if (!idReg.test(idStr)) {\r\n          uni.showToast({ title: '身份证号需为18位数字', icon: 'none' })\r\n          return\r\n        }\r\n\r\n        // 4. 就读学校必填\r\n        if (!this.studentSchool || String(this.studentSchool).trim().length === 0) {\r\n          uni.showToast({ title: '请输入就读学校', icon: 'none' })\r\n          return\r\n        }\r\n\r\n        // 5. 就读年级必填\r\n        if (!this.studentGrade || String(this.studentGrade).trim().length === 0) {\r\n          uni.showToast({ title: '请输入就读年级', icon: 'none' })\r\n          return\r\n        }\r\n\r\n        // 6. 商品列表不能为空\r\n        if (!this.items.length) {\r\n          uni.showToast({ title: '订单商品为空', icon: 'none' })\r\n          return\r\n        }\r\n\r\n        // 从本地取 openid\r\n        const openid = uni.getStorageSync('openid') as string\r\n        if (!openid) {\r\n          uni.showToast({\r\n            title: '缺少 openid，请重新登录',\r\n            icon: 'none'\r\n          })\r\n          return\r\n        }\r\n\r\n        const payload = {\r\n          userId: openid || 0,\r\n          realName: this.realName,\r\n          mobile: mobileStr,\r\n          idCardNo: idStr,\r\n          studentSchool: String(this.studentSchool).trim(),\r\n          studentGrade: String(this.studentGrade).trim(),\r\n          items: this.items\r\n        }\r\n\r\n        this.submitting = true\r\n\r\n        // 1️⃣ 先创建订单（你的 Node 后端）\r\n        uni.request({\r\n          url: 'https://wdxwhdglzx.jzzw-tech.cn/api/orders/create',\r\n          method: 'POST',\r\n          header: {\r\n            'content-type': 'application/json'\r\n          },\r\n          data: payload,\r\n          success: (res: UniApp.RequestSuccessCallbackResult) => {\r\n            const data = res.data as any\r\n            if (data.code === 200) {\r\n              const orderData = data.data || {}\r\n              const orderNo = orderData.orderNo\r\n              const payAmount = Number(orderData.payAmount || this.payAmount)\r\n\r\n              // 2️⃣ 创建订单成功后，调你的统一下单服务，拉起微信支付\r\n              this.doWxPay(orderNo, payAmount, openid)\r\n            } else {\r\n              uni.showToast({\r\n                title: data.message || '提交失败',\r\n                icon: 'none'\r\n              })\r\n              this.submitting = false\r\n            }\r\n          },\r\n          fail: (err) => {\r\n            uni.__f__('error','at pages/ConfirmOrder/ConfirmOrder.uvue:368','创建订单失败', err)\r\n            uni.showToast({\r\n              title: '网络错误，稍后重试',\r\n              icon: 'none'\r\n            })\r\n            this.submitting = false\r\n          }\r\n        })\r\n      },\r\n\r\n      // 微信支付（调用 https://pay.jzzw-tech.cn/）\r\n      doWxPay(orderNo: string, payAmount: number, openid: string) {\r\n        // 金额转成「分」\r\n        const total = Math.round(Number(payAmount || 0) * 100)\r\n        if (!total || total <= 0) {\r\n          uni.showToast({\r\n            title: '支付金额异常',\r\n            icon: 'none'\r\n          })\r\n          this.submitting = false\r\n          return\r\n        }\r\n\r\n        // 跟你原来小程序 Demo 保持一致：JSON + appid/mchid 字段名\r\n        uni.request({\r\n          url: 'https://pay.jzzw-tech.cn/',\r\n          method: 'POST',\r\n          header: { 'content-type': 'application/json' },\r\n          data: {\r\n            appid:       WX_APPID,\r\n            mchid:       WX_MCHID,\r\n            description: '订单支付',\r\n            outTradeNo:  orderNo,\r\n            attach:      'shop_order',\r\n            total:       total,\r\n            openid:      openid\r\n          },\r\n          success: (resPay: UniApp.RequestSuccessCallbackResult) => {\r\n            uni.__f__('log','at pages/ConfirmOrder/ConfirmOrder.uvue:406','统一下单返回：', resPay.data)\r\n            const payData = resPay.data as any\r\n            const {\r\n              appId,\r\n              timeStamp,\r\n              nonceStr,\r\n              package: pkg,\r\n              signType,\r\n              paySign\r\n            } = payData || {}\r\n\r\n            if (!pkg || !paySign || !timeStamp || !nonceStr) {\r\n              uni.showToast({\r\n                title: '支付下单返回不完整',\r\n                icon: 'none'\r\n              })\r\n              this.submitting = false\r\n              return\r\n            }\r\n\r\n            // 3️⃣ 拉起微信支付（小程序端）\r\n            // 在 mp-weixin 下，uni.requestPayment 会映射到 wx.requestPayment\r\n            uni.requestPayment({\r\n\r\n              timeStamp: String(timeStamp),\r\n              nonceStr: nonceStr,\r\n              package: pkg,\r\n              signType: signType || 'RSA',\r\n              paySign: paySign,\r\n\r\n              success: (resPay2) => {\r\n                uni.__f__('log','at pages/ConfirmOrder/ConfirmOrder.uvue:437','支付成功：', resPay2)\r\n                uni.showToast({ title: '支付成功', icon: 'success' })\r\n                setTimeout(() => {\r\n                  uni.navigateTo({\r\n                    url: '/pages/OrderList/OrderList'\r\n                  })\r\n                }, 500)\r\n              },\r\n              fail: (err) => {\r\n                uni.__f__('log','at pages/ConfirmOrder/ConfirmOrder.uvue:446','支付失败：', err)\r\n                uni.showToast({\r\n                  title: '支付未完成',\r\n                  icon: 'none'\r\n                })\r\n              },\r\n              complete: () => {\r\n                this.submitting = false\r\n              }\r\n            } as any)\r\n          },\r\n          fail: (err) => {\r\n            uni.__f__('log','at pages/ConfirmOrder/ConfirmOrder.uvue:458','统一下单请求失败：', err)\r\n            uni.showToast({\r\n              title: '支付请求失败',\r\n              icon: 'none'\r\n            })\r\n            this.submitting = false\r\n          }\r\n        })\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n\r\n\r\n<style lang=\"scss\">\r\n  @import \"ConfirmOrder.scss\";\r\n</style>\r\n","import MiniProgramPage from 'C:/Users/zrh/Desktop/7600/e-shop/pages/ConfirmOrder/ConfirmOrder.uvue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","uni"],"mappings":"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"}